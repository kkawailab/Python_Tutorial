<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python初級チュートリアル完全版</title>
    <style>
        /* ベーススタイル */
        body {
            font-family: 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
            line-height: 1.8;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
            background-color: #f8f9fa;
        }
        
        /* ヘッダー */
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        h2 {
            color: #34495e;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 8px;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 2em;
        }
        
        h3 {
            color: #2980b9;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        h4 {
            color: #16a085;
            margin-top: 25px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        /* パラグラフ */
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        /* リスト */
        ul, ol {
            margin-bottom: 15px;
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* 目次 */
        .toc {
            background-color: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc li {
            margin-bottom: 5px;
        }
        
        .toc a {
            color: #2980b9;
            text-decoration: none;
            font-weight: 500;
        }
        
        .toc a:hover {
            color: #e74c3c;
            text-decoration: underline;
        }
        
        /* コードブロック */
        pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            line-height: 1.6;
        }
        
        code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', 'Source Code Pro', monospace;
            font-size: 0.9em;
        }
        
        /* インラインコード */
        p code, li code, td code {
            background-color: #f4f4f4;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            color: #e74c3c;
            font-size: 0.85rem;
            border: 1px solid #ddd;
        }
        
        /* テーブル */
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #3498db;
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        /* 引用 */
        blockquote {
            border-left: 4px solid #3498db;
            margin: 20px 0;
            padding: 10px 20px;
            background-color: #ecf0f1;
            font-style: italic;
        }
        
        /* リンク */
        a {
            color: #3498db;
            text-decoration: none;
        }
        
        a:hover {
            color: #e74c3c;
            text-decoration: underline;
        }
        
        /* セクション区切り */
        hr {
            border: none;
            height: 2px;
            background: linear-gradient(to right, #3498db, #e74c3c);
            margin: 40px 0;
        }
        
        /* 注意書き */
        .note {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .warning {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
        }
        
        /* レスポンシブデザイン */
        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 14px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            h2 {
                font-size: 1.5em;
            }
            
            pre {
                padding: 10px;
                font-size: 0.8em;
            }
        }
        
        /* カスタムシンタックスハイライト */
        .highlight {
            background-color: #f8f9fa;
        }
        
        /* コメント */
        .highlight .c, .highlight .c1, .highlight .cm {
            color: #6c757d;
            font-style: italic;
        }
        
        /* キーワード */
        .highlight .k, .highlight .kn, .highlight .kd, .highlight .kc {
            color: #0066cc;
            font-weight: 600;
        }
        
        /* 文字列 */
        .highlight .s, .highlight .s1, .highlight .s2, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .se, .highlight .sh, .highlight .si, .highlight .sx {
            color: #28a745;
        }
        
        /* 数値 */
        .highlight .m, .highlight .mi, .highlight .mf, .highlight .mh, .highlight .mo {
            color: #dc3545;
        }
        
        /* 関数名 */
        .highlight .nf {
            color: #6f42c1;
            font-weight: 500;
        }
        
        /* クラス名 */
        .highlight .nc {
            color: #e83e8c;
            font-weight: 600;
        }
        
        /* 変数名 */
        .highlight .n, .highlight .nb, .highlight .nv {
            color: #495057;
        }
        
        /* 演算子 */
        .highlight .o, .highlight .ow {
            color: #6c757d;
        }
        
        /* 括弧 */
        .highlight .p {
            color: #6c757d;
        }
        
        /* デコレータ */
        .highlight .nd {
            color: #fd7e14;
            font-weight: 500;
        }
        
        /* エラー */
        .highlight .err {
            color: #dc3545;
        }
        
        /* self, cls */
        .highlight .bp {
            color: #6f42c1;
            font-style: italic;
        }
        
        /* True, False, None */
        .highlight .kc {
            color: #e83e8c;
            font-weight: 600;
        }
        
        
        /* 目次へ戻るボタン */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #3498db;
            color: white;
            padding: 10px 15px;
            border-radius: 50%;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            font-size: 18px;
        }
        
        .back-to-top:hover {
            background-color: #e74c3c;
            color: white;
        }
    </style>
</head>
<body>
    <h1 id="python"><a class="toclink" href="#python">Python初級チュートリアル完全版</a></h1>
<h2 id="_1"><a class="toclink" href="#_1">目次</a></h2>
<ol>
<li><a href="#はじめに">はじめに</a></li>
<li><a href="#hello-world">Hello World - 最初のプログラム</a></li>
<li><a href="#変数とデータ型">変数とデータ型</a></li>
<li><a href="#文字列操作">文字列操作</a></li>
<li><a href="#リストとタプル">リストとタプル</a></li>
<li><a href="#辞書とセット">辞書とセット</a></li>
<li><a href="#制御フロー">制御フロー</a></li>
<li><a href="#関数">関数</a></li>
<li><a href="#モジュールとパッケージ">モジュールとパッケージ</a></li>
<li><a href="#クラスとオブジェクト指向">クラスとオブジェクト指向</a></li>
<li><a href="#ファイル操作">ファイル操作</a></li>
<li><a href="#エラー処理">エラー処理</a></li>
</ol>
<h2 id="_2"><a class="toclink" href="#_2">はじめに</a></h2>
<p>このチュートリアルは、Pythonプログラミングの基礎を学ぶための包括的なガイドです。プログラミング初心者でも理解できるよう、基本概念から実践的な例まで段階的に説明します。</p>
<h3 id="_3"><a class="toclink" href="#_3">必要な環境</a></h3>
<ul>
<li>Python 3.7以上</li>
<li>テキストエディタまたはIDE（VSCode、PyCharmなど推奨）</li>
</ul>
<h3 id="_4"><a class="toclink" href="#_4">チュートリアルの使い方</a></h3>
<p>各セクションには実行可能なコード例が含まれています。コードをコピーして実行し、結果を確認しながら学習を進めてください。</p>
<hr />
<h2 id="hello-world"><a class="toclink" href="#hello-world">1. Hello World - 最初のプログラム</a></h2>
<h3 id="_5"><a class="toclink" href="#_5">基本的な出力</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 01_hello_world.py - Hello World と基本的な出力</span>

<span class="c1"># ===== 最も基本的なプログラム =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>

<span class="c1"># ===== 日本語での出力 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;こんにちは、Python！&quot;</span><span class="p">)</span>

<span class="c1"># ===== 複数行の出力 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pythonプログラミングへようこそ！&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;これから一緒に学んでいきましょう。&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;楽しいプログラミングの世界が待っています！&quot;</span><span class="p">)</span>

<span class="c1"># ===== print関数の様々な使い方 =====</span>
<span class="nb">print</span><span class="p">()</span>  <span class="c1"># 空行を出力</span>

<span class="c1"># 複数の値を出力</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;名前:&quot;</span><span class="p">,</span> <span class="s2">&quot;田中太郎&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;年齢:&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;歳&quot;</span><span class="p">)</span>

<span class="c1"># セパレータ（区切り文字）の指定</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;りんご&quot;</span><span class="p">,</span> <span class="s2">&quot;バナナ&quot;</span><span class="p">,</span> <span class="s2">&quot;オレンジ&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot; | &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;2024&quot;</span><span class="p">,</span> <span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="s2">&quot;25&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>

<span class="c1"># 改行なしで出力（endパラメータ）</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;処理中&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;完了！&quot;</span><span class="p">)</span>

<span class="c1"># ===== エスケープシーケンス =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">特殊文字の使い方:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;改行: line1</span><span class="se">\n</span><span class="s2">line2&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;タブ: column1</span><span class="se">\t</span><span class="s2">column2</span><span class="se">\t</span><span class="s2">column3&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;引用符: </span><span class="se">\&quot;</span><span class="s2">ダブルクォート</span><span class="se">\&quot;</span><span class="s2"> と </span><span class="se">\&#39;</span><span class="s2">シングルクォート</span><span class="se">\&#39;</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;バックスラッシュ: C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">name</span><span class="se">\\</span><span class="s2">Documents&quot;</span><span class="p">)</span>

<span class="c1"># ===== 文字列のフォーマット =====</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span>
<span class="n">version</span> <span class="o">=</span> <span class="mf">3.9</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> バージョン </span><span class="si">{</span><span class="n">version</span><span class="si">}</span><span class="s2"> を使用しています&quot;</span><span class="p">)</span>

<span class="c1"># ===== コメントの重要性 =====</span>
<span class="c1"># これは単一行コメントです</span>
<span class="c1"># プログラムの説明や注意事項を書きます</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">これは複数行コメント（ドキュメント文字列）です。</span>
<span class="sd">関数やクラスの説明に使用したり、</span>
<span class="sd">長い説明が必要な場合に使います。</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># プログラムの終了メッセージ</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">最初のPythonプログラムが完了しました！🎉&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_6"><a class="toclink" href="#_6">実行方法</a></h3>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>01_hello_world.py
</code></pre></div>

<h3 id="_7"><a class="toclink" href="#_7">学習ポイント</a></h3>
<ul>
<li><code>print()</code>関数は画面に文字を表示する最も基本的な関数</li>
<li>日本語も問題なく表示可能</li>
<li><code>sep</code>パラメータで区切り文字を指定</li>
<li><code>end</code>パラメータで行末文字を指定</li>
<li>エスケープシーケンスで特殊文字を表現</li>
</ul>
<hr />
<h2 id="変数とデータ型"><a class="toclink" href="#変数とデータ型">2. 変数とデータ型</a></h2>
<h3 id="_8"><a class="toclink" href="#_8">基本的なデータ型</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 02_variables_and_types.py - 変数とデータ型</span>

<span class="c1"># ===== 変数の基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== 変数の基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># 変数の代入</span>
<span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Hello, Python!&quot;</span>
<span class="n">number</span> <span class="o">=</span> <span class="mi">42</span>
<span class="n">pi</span> <span class="o">=</span> <span class="mf">3.14159</span>
<span class="n">is_active</span> <span class="o">=</span> <span class="kc">True</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;メッセージ: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;数値: </span><span class="si">{</span><span class="n">number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;円周率: </span><span class="si">{</span><span class="n">pi</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;アクティブ状態: </span><span class="si">{</span><span class="n">is_active</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 変数の再代入</span>
<span class="n">number</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">更新後の数値: </span><span class="si">{</span><span class="n">number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== データ型 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== データ型 ===&quot;</span><span class="p">)</span>

<span class="c1"># 整数（int）</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">year</span> <span class="o">=</span> <span class="mi">2024</span>
<span class="n">temperature</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;整数の例: </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">temperature</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 浮動小数点数（float）</span>
<span class="n">height</span> <span class="o">=</span> <span class="mf">170.5</span>
<span class="n">weight</span> <span class="o">=</span> <span class="mf">65.3</span>
<span class="n">percentage</span> <span class="o">=</span> <span class="mf">0.85</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;小数の例: </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">weight</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">percentage</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 文字列（str）</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;田中太郎&quot;</span>
<span class="n">city</span> <span class="o">=</span> <span class="s1">&#39;東京&#39;</span>  <span class="c1"># シングルクォートも使用可能</span>
<span class="n">multiline</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;これは</span>
<span class="s2">複数行の</span>
<span class="s2">文字列です&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;文字列の例: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;複数行文字列:</span><span class="se">\n</span><span class="si">{</span><span class="n">multiline</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ブール値（bool）</span>
<span class="n">is_student</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">is_married</span> <span class="o">=</span> <span class="kc">False</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ブール値の例: </span><span class="si">{</span><span class="n">is_student</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">is_married</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># None（値がないことを表す）</span>
<span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;None値: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 型の確認 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 型の確認 ===&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;Hello&#39;の型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;42の型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3.14の型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="mf">3.14</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Trueの型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Noneの型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 型変換 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 型変換 ===&quot;</span><span class="p">)</span>

<span class="c1"># 文字列を数値に変換</span>
<span class="n">str_number</span> <span class="o">=</span> <span class="s2">&quot;123&quot;</span>
<span class="n">int_number</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">str_number</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;文字列&#39;</span><span class="si">{</span><span class="n">str_number</span><span class="si">}</span><span class="s2">&#39;を整数に変換: </span><span class="si">{</span><span class="n">int_number</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 数値を文字列に変換</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">456</span>
<span class="n">str_num</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;数値</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">を文字列に変換: &#39;</span><span class="si">{</span><span class="n">str_num</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

<span class="c1"># 小数と整数の相互変換</span>
<span class="n">float_num</span> <span class="o">=</span> <span class="mf">3.7</span>
<span class="n">int_from_float</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">float_num</span><span class="p">)</span>  <span class="c1"># 小数点以下切り捨て</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;小数</span><span class="si">{</span><span class="n">float_num</span><span class="si">}</span><span class="s2">を整数に変換: </span><span class="si">{</span><span class="n">int_from_float</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">int_val</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">float_from_int</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">int_val</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;整数</span><span class="si">{</span><span class="n">int_val</span><span class="si">}</span><span class="s2">を小数に変換: </span><span class="si">{</span><span class="n">float_from_int</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 変数名のルール =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 変数名のルール ===&quot;</span><span class="p">)</span>

<span class="c1"># 良い変数名の例</span>
<span class="n">user_name</span> <span class="o">=</span> <span class="s2">&quot;山田&quot;</span>
<span class="n">age_in_years</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">is_valid_email</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">MAX_SIZE</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># 定数は大文字</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;良い変数名の例:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  user_name: </span><span class="si">{</span><span class="n">user_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  age_in_years: </span><span class="si">{</span><span class="n">age_in_years</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  is_valid_email: </span><span class="si">{</span><span class="n">is_valid_email</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  MAX_SIZE: </span><span class="si">{</span><span class="n">MAX_SIZE</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 使用できない変数名の例（コメントで説明）</span>
<span class="c1"># 1age = 25  # 数字で始まる変数名はエラー</span>
<span class="c1"># my-name = &quot;太郎&quot;  # ハイフンは使用不可</span>
<span class="c1"># class = &quot;A&quot;  # 予約語は使用不可</span>

<span class="c1"># ===== 動的型付け =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 動的型付け ===&quot;</span><span class="p">)</span>

<span class="c1"># Pythonは動的型付け言語</span>
<span class="n">variable</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;初期値: </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">, 型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">variable</span> <span class="o">=</span> <span class="s2">&quot;文字列に変更&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;変更後: </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">, 型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">variable</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;再変更: </span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">, 型: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 算術演算 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 算術演算 ===&quot;</span><span class="p">)</span>

<span class="n">a</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">3</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;加算: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> + </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;減算: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;乗算: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;除算: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> / </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;整数除算: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> // </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;剰余: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> % </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;べき乗: </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> ** </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">a</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 複合代入演算子 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 複合代入演算子 ===&quot;</span><span class="p">)</span>

<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;初期値: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">count</span> <span class="o">+=</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;+=5 後: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">count</span> <span class="o">-=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;-=2 後: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">count</span> <span class="o">*=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;*=3 後: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">count</span> <span class="o">//=</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;//=2 後: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_9"><a class="toclink" href="#_9">学習ポイント</a></h3>
<ul>
<li>Pythonの基本的なデータ型：int、float、str、bool、None</li>
<li>変数は型宣言不要（動的型付け）</li>
<li><code>type()</code>関数で型を確認</li>
<li>型変換関数：<code>int()</code>、<code>float()</code>、<code>str()</code>など</li>
<li>変数名は英数字とアンダースコアのみ使用可能</li>
</ul>
<hr />
<h2 id="文字列操作"><a class="toclink" href="#文字列操作">3. 文字列操作</a></h2>
<h3 id="_10"><a class="toclink" href="#_10">文字列の基本操作</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 03_strings.py - 文字列の操作</span>

<span class="c1"># ===== 文字列の作成 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== 文字列の作成 ===&quot;</span><span class="p">)</span>

<span class="c1"># さまざまな引用符の使い方</span>
<span class="n">single</span> <span class="o">=</span> <span class="s1">&#39;シングルクォート&#39;</span>
<span class="n">double</span> <span class="o">=</span> <span class="s2">&quot;ダブルクォート&quot;</span>
<span class="n">triple_single</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;複数行の</span>
<span class="s1">文字列を</span>
<span class="s1">書けます&#39;&#39;&#39;</span>
<span class="n">triple_double</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;こちらも</span>
<span class="s2">複数行の文字列</span>
<span class="s2">です&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">single</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">double</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">triple_single</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">triple_double</span><span class="p">)</span>

<span class="c1"># ===== 文字列の連結 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 文字列の連結 ===&quot;</span><span class="p">)</span>

<span class="n">first_name</span> <span class="o">=</span> <span class="s2">&quot;太郎&quot;</span>
<span class="n">last_name</span> <span class="o">=</span> <span class="s2">&quot;田中&quot;</span>

<span class="c1"># + 演算子で連結</span>
<span class="n">full_name</span> <span class="o">=</span> <span class="n">last_name</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">first_name</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;フルネーム: </span><span class="si">{</span><span class="n">full_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 複数の文字列を連結</span>
<span class="n">greeting</span> <span class="o">=</span> <span class="s2">&quot;こんにちは、&quot;</span> <span class="o">+</span> <span class="n">full_name</span> <span class="o">+</span> <span class="s2">&quot;さん！&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">greeting</span><span class="p">)</span>

<span class="c1"># ===== 文字列の繰り返し =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 文字列の繰り返し ===&quot;</span><span class="p">)</span>

<span class="n">star</span> <span class="o">=</span> <span class="s2">&quot;★&quot;</span>
<span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;-&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">star</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">line</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1"># ===== 文字列のインデックスとスライス =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== インデックスとスライス ===&quot;</span><span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Python Programming&quot;</span>

<span class="c1"># インデックス（0から始まる）</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最初の文字: </span><span class="si">{</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最後の文字: </span><span class="si">{</span><span class="n">text</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3番目の文字: </span><span class="si">{</span><span class="n">text</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># スライス [開始:終了:ステップ]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">最初の6文字: </span><span class="si">{</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;7文字目以降: </span><span class="si">{</span><span class="n">text</span><span class="p">[</span><span class="mi">7</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最後の11文字: </span><span class="si">{</span><span class="n">text</span><span class="p">[</span><span class="o">-</span><span class="mi">11</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;1文字おき: </span><span class="si">{</span><span class="n">text</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;逆順: </span><span class="si">{</span><span class="n">text</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 文字列のメソッド =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 文字列のメソッド ===&quot;</span><span class="p">)</span>

<span class="n">sample</span> <span class="o">=</span> <span class="s2">&quot;  Hello, Python World!  &quot;</span>

<span class="c1"># 大文字・小文字変換</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;大文字: </span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;小文字: </span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;タイトルケース: </span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 空白の除去</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;前後の空白除去: &#39;</span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;左側の空白除去: &#39;</span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">lstrip</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;右側の空白除去: &#39;</span><span class="si">{</span><span class="n">sample</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

<span class="c1"># 文字列の置換</span>
<span class="n">replaced</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Python&quot;</span><span class="p">,</span> <span class="s2">&quot;プログラミング&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;置換後: </span><span class="si">{</span><span class="n">replaced</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 文字列の分割</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;単語に分割: </span><span class="si">{</span><span class="n">words</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">csv_data</span> <span class="o">=</span> <span class="s2">&quot;りんご,バナナ,オレンジ&quot;</span>
<span class="n">fruits</span> <span class="o">=</span> <span class="n">csv_data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;カンマで分割: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 文字列の結合</span>
<span class="n">joined</span> <span class="o">=</span> <span class="s2">&quot; - &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fruits</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;結合: </span><span class="si">{</span><span class="n">joined</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 文字列の検索 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 文字列の検索 ===&quot;</span><span class="p">)</span>

<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Python is easy. Python is powerful.&quot;</span>

<span class="c1"># 含まれているかチェック</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;Python&#39;が含まれている: </span><span class="si">{</span><span class="s1">&#39;Python&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;Java&#39;が含まれている: </span><span class="si">{</span><span class="s1">&#39;Java&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 位置を検索</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;Python&#39;の最初の位置: </span><span class="si">{</span><span class="n">text</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Python&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;Python&#39;の最後の位置: </span><span class="si">{</span><span class="n">text</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="s1">&#39;Python&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;Python&#39;の出現回数: </span><span class="si">{</span><span class="n">text</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;Python&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 開始・終了のチェック</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;Python&#39;で始まる: </span><span class="si">{</span><span class="n">text</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Python&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;powerful.&#39;で終わる: </span><span class="si">{</span><span class="n">text</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;powerful.&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 文字列のフォーマット =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 文字列のフォーマット ===&quot;</span><span class="p">)</span>

<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;山田&quot;</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">height</span> <span class="o">=</span> <span class="mf">170.5</span>

<span class="c1"># f-string（推奨）</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">さんは</span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">歳で、身長は</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s2">cmです。&quot;</span><span class="p">)</span>

<span class="c1"># format()メソッド</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">さんは</span><span class="si">{}</span><span class="s2">歳で、身長は</span><span class="si">{}</span><span class="s2">cmです。&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>

<span class="c1"># % 演算子（古い方法）</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">さんは</span><span class="si">%d</span><span class="s2">歳で、身長は</span><span class="si">%.1f</span><span class="s2">cmです。&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>

<span class="c1"># 数値のフォーマット</span>
<span class="n">price</span> <span class="o">=</span> <span class="mf">1234.567</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">価格のフォーマット:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  通常: </span><span class="si">{</span><span class="n">price</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  小数点2桁: </span><span class="si">{</span><span class="n">price</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  カンマ区切り: </span><span class="si">{</span><span class="n">price</span><span class="si">:</span><span class="s2">,.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  パーセント: </span><span class="si">{</span><span class="mf">0.85</span><span class="si">:</span><span class="s2">.1%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== エスケープ文字 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== エスケープ文字 ===&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;改行を含む文字列:</span><span class="se">\n</span><span class="s2">これは新しい行です&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;タブを含む文字列:</span><span class="se">\t</span><span class="s2">列1</span><span class="se">\t</span><span class="s2">列2</span><span class="se">\t</span><span class="s2">列3&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;引用符: </span><span class="se">\&quot;</span><span class="s2">ダブル</span><span class="se">\&quot;</span><span class="s2"> と </span><span class="se">\&#39;</span><span class="s2">シングル</span><span class="se">\&#39;</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;バックスラッシュ: C:</span><span class="se">\\</span><span class="s2">Users</span><span class="se">\\</span><span class="s2">Documents&quot;</span><span class="p">)</span>

<span class="c1"># raw文字列（エスケープを無効化）</span>
<span class="n">path</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\Users\Documents\file.txt&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;raw文字列: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 文字列の判定 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 文字列の判定 ===&quot;</span><span class="p">)</span>

<span class="c1"># 数値判定</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;123&#39;.isdigit():&quot;</span><span class="p">,</span> <span class="s2">&quot;123&quot;</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;123.45&#39;.isdigit():&quot;</span><span class="p">,</span> <span class="s2">&quot;123.45&quot;</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span>

<span class="c1"># アルファベット判定</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;Hello&#39;.isalpha():&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="o">.</span><span class="n">isalpha</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;Hello123&#39;.isalpha():&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello123&quot;</span><span class="o">.</span><span class="n">isalpha</span><span class="p">())</span>

<span class="c1"># 英数字判定</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;Hello123&#39;.isalnum():&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello123&quot;</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;Hello 123&#39;.isalnum():&quot;</span><span class="p">,</span> <span class="s2">&quot;Hello 123&quot;</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>

<span class="c1"># ===== 実用的な例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な例 ===&quot;</span><span class="p">)</span>

<span class="c1"># メールアドレスの簡易バリデーション</span>
<span class="n">email</span> <span class="o">=</span> <span class="s2">&quot;user@example.com&quot;</span>
<span class="n">is_valid</span> <span class="o">=</span> <span class="s2">&quot;@&quot;</span> <span class="ow">in</span> <span class="n">email</span> <span class="ow">and</span> <span class="n">email</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2"> は有効: </span><span class="si">{</span><span class="n">is_valid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 文字列のクリーニング</span>
<span class="n">user_input</span> <span class="o">=</span> <span class="s2">&quot;  HELLO world  </span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">cleaned</span> <span class="o">=</span> <span class="n">user_input</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;クリーニング前: &#39;</span><span class="si">{</span><span class="n">user_input</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;クリーニング後: &#39;</span><span class="si">{</span><span class="n">cleaned</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>

<span class="c1"># パスワードの強度チェック</span>
<span class="n">password</span> <span class="o">=</span> <span class="s2">&quot;Pass123!&quot;</span>
<span class="n">has_upper</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
<span class="n">has_lower</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">islower</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
<span class="n">has_digit</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
<span class="n">has_special</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">c</span> <span class="ow">in</span> <span class="s2">&quot;!@#$%^&amp;*&quot;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">password</span><span class="p">)</span>
<span class="n">is_strong</span> <span class="o">=</span> <span class="nb">all</span><span class="p">([</span><span class="n">has_upper</span><span class="p">,</span> <span class="n">has_lower</span><span class="p">,</span> <span class="n">has_digit</span><span class="p">,</span> <span class="n">has_special</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">8</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">パスワード &#39;</span><span class="si">{</span><span class="n">password</span><span class="si">}</span><span class="s2">&#39; の強度:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  大文字: </span><span class="si">{</span><span class="n">has_upper</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  小文字: </span><span class="si">{</span><span class="n">has_lower</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  数字: </span><span class="si">{</span><span class="n">has_digit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  特殊文字: </span><span class="si">{</span><span class="n">has_special</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  強度: </span><span class="si">{</span><span class="s1">&#39;強&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_strong</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;弱&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_11"><a class="toclink" href="#_11">学習ポイント</a></h3>
<ul>
<li>文字列は不変（immutable）なデータ型</li>
<li>インデックスとスライスで部分文字列を取得</li>
<li>豊富な文字列メソッドで様々な操作が可能</li>
<li>f-stringが最も推奨される文字列フォーマット方法</li>
<li>文字列の検索、置換、分割、結合などの基本操作</li>
</ul>
<hr />
<h2 id="リストとタプル"><a class="toclink" href="#リストとタプル">4. リストとタプル</a></h2>
<h3 id="_12"><a class="toclink" href="#_12">リストの操作</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 04_lists_and_tuples.py - リストとタプル</span>

<span class="c1"># ===== リストの基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== リストの基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># リストの作成</span>
<span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;りんご&quot;</span><span class="p">,</span> <span class="s2">&quot;バナナ&quot;</span><span class="p">,</span> <span class="s2">&quot;オレンジ&quot;</span><span class="p">]</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">mixed</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;Hello&quot;</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
<span class="n">empty_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;フルーツ: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;数値: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;混合: </span><span class="si">{</span><span class="n">mixed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;空のリスト: </span><span class="si">{</span><span class="n">empty_list</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># リストの要素にアクセス</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">最初の要素: </span><span class="si">{</span><span class="n">fruits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最後の要素: </span><span class="si">{</span><span class="n">fruits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;2番目の要素: </span><span class="si">{</span><span class="n">fruits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== リストの変更 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== リストの変更 ===&quot;</span><span class="p">)</span>

<span class="c1"># 要素の変更</span>
<span class="n">fruits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ぶどう&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;変更後: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 要素の追加</span>
<span class="n">fruits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;メロン&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;append後: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fruits</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;いちご&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;insert後: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 要素の削除</span>
<span class="n">removed</span> <span class="o">=</span> <span class="n">fruits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># 最後の要素を削除</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pop後: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">, 削除された要素: </span><span class="si">{</span><span class="n">removed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fruits</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;ぶどう&quot;</span><span class="p">)</span>  <span class="c1"># 特定の要素を削除</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;remove後: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== リストのスライス =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== リストのスライス ===&quot;</span><span class="p">)</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;元のリスト: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最初の3つ: </span><span class="si">{</span><span class="n">numbers</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3番目から6番目: </span><span class="si">{</span><span class="n">numbers</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最後の3つ: </span><span class="si">{</span><span class="n">numbers</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;1つおき: </span><span class="si">{</span><span class="n">numbers</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;逆順: </span><span class="si">{</span><span class="n">numbers</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== リストの操作 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== リストの操作 ===&quot;</span><span class="p">)</span>

<span class="c1"># リストの連結</span>
<span class="n">list1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">list2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">combined</span> <span class="o">=</span> <span class="n">list1</span> <span class="o">+</span> <span class="n">list2</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;連結: </span><span class="si">{</span><span class="n">combined</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># リストの繰り返し</span>
<span class="n">repeated</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;繰り返し: </span><span class="si">{</span><span class="n">repeated</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># リストの長さ</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;fruitsの長さ: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">fruits</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 要素の存在確認</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;りんご&#39;は含まれている: </span><span class="si">{</span><span class="s1">&#39;りんご&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;パイナップル&#39;は含まれている: </span><span class="si">{</span><span class="s1">&#39;パイナップル&#39;</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== リストのメソッド =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== リストのメソッド ===&quot;</span><span class="p">)</span>

<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;元のリスト: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ソート</span>
<span class="n">numbers</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;昇順ソート後: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">numbers</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;降順ソート後: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># その他のメソッド</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最小値: </span><span class="si">{</span><span class="nb">min</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最大値: </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;合計: </span><span class="si">{</span><span class="nb">sum</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;1の出現回数: </span><span class="si">{</span><span class="n">numbers</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;5のインデックス: </span><span class="si">{</span><span class="n">numbers</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== リスト内包表記 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== リスト内包表記 ===&quot;</span><span class="p">)</span>

<span class="c1"># 基本的なリスト内包表記</span>
<span class="n">squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;0-9の二乗: </span><span class="si">{</span><span class="n">squares</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 条件付きリスト内包表記</span>
<span class="n">even_squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;偶数の二乗: </span><span class="si">{</span><span class="n">even_squares</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 文字列処理</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;world&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">]</span>
<span class="n">upper_words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;大文字変換: </span><span class="si">{</span><span class="n">upper_words</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== タプルの基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== タプルの基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># タプルの作成</span>
<span class="n">coordinates</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">rgb</span> <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">single</span> <span class="o">=</span> <span class="p">(</span><span class="mi">42</span><span class="p">,)</span>  <span class="c1"># 要素が1つの場合はカンマが必要</span>
<span class="n">empty_tuple</span> <span class="o">=</span> <span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;座標: </span><span class="si">{</span><span class="n">coordinates</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;RGB: </span><span class="si">{</span><span class="n">rgb</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;単一要素: </span><span class="si">{</span><span class="n">single</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># タプルの要素にアクセス</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">coordinates</span>  <span class="c1"># アンパック</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x = </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, y = </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># タプルは不変（変更不可）</span>
<span class="c1"># coordinates[0] = 30  # これはエラーになる</span>

<span class="c1"># ===== リストとタプルの変換 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== リストとタプルの変換 ===&quot;</span><span class="p">)</span>

<span class="c1"># リストからタプル</span>
<span class="n">list_data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">tuple_data</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">list_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;リストをタプルに: </span><span class="si">{</span><span class="n">tuple_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># タプルからリスト</span>
<span class="n">tuple_data</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">list_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">tuple_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;タプルをリストに: </span><span class="si">{</span><span class="n">list_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== ネストしたリスト =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ネストしたリスト ===&quot;</span><span class="p">)</span>

<span class="c1"># 2次元リスト（行列）</span>
<span class="n">matrix</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
<span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;行列:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 要素にアクセス</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">要素[1][2]: </span><span class="si">{</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 実用的な例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な例 ===&quot;</span><span class="p">)</span>

<span class="c1"># 1. 成績の集計</span>
<span class="n">scores</span> <span class="o">=</span> <span class="p">[</span><span class="mi">85</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">88</span><span class="p">,</span> <span class="mi">76</span><span class="p">,</span> <span class="mi">90</span><span class="p">]</span>
<span class="n">average</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span>
<span class="n">above_average</span> <span class="o">=</span> <span class="p">[</span><span class="n">score</span> <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">scores</span> <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="n">average</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;成績: </span><span class="si">{</span><span class="n">scores</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;平均点: </span><span class="si">{</span><span class="n">average</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;平均以上の成績: </span><span class="si">{</span><span class="n">above_average</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 2. データのフィルタリング</span>
<span class="n">products</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;りんご&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;バナナ&quot;</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;オレンジ&quot;</span><span class="p">,</span> <span class="mi">120</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;ぶどう&quot;</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;メロン&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">cheap_products</span> <span class="o">=</span> <span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">price</span> <span class="ow">in</span> <span class="n">products</span> <span class="k">if</span> <span class="n">price</span> <span class="o">&lt;</span> <span class="mi">150</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">150円未満の商品: </span><span class="si">{</span><span class="n">cheap_products</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 3. リストの重複削除</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">unique_numbers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">numbers</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">重複削除前: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;重複削除後: </span><span class="si">{</span><span class="n">unique_numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 4. zip関数の使用</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;田中&quot;</span><span class="p">,</span> <span class="s2">&quot;山田&quot;</span><span class="p">,</span> <span class="s2">&quot;佐藤&quot;</span><span class="p">]</span>
<span class="n">ages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">28</span><span class="p">]</span>
<span class="n">cities</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;東京&quot;</span><span class="p">,</span> <span class="s2">&quot;大阪&quot;</span><span class="p">,</span> <span class="s2">&quot;名古屋&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">city</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">ages</span><span class="p">,</span> <span class="n">cities</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">さん（</span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">歳）は</span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">に住んでいます&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_13"><a class="toclink" href="#_13">学習ポイント</a></h3>
<ul>
<li>リストは可変（mutable）、タプルは不変（immutable）</li>
<li>リストは<code>[]</code>、タプルは<code>()</code>で作成</li>
<li>インデックスとスライスで要素にアクセス</li>
<li>リスト内包表記で簡潔にリストを作成</li>
<li><code>zip()</code>関数で複数のリストを同時に処理</li>
</ul>
<hr />
<h2 id="辞書とセット"><a class="toclink" href="#辞書とセット">5. 辞書とセット</a></h2>
<h3 id="_14"><a class="toclink" href="#_14">辞書とセットの操作</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 05_dictionaries_and_sets.py - 辞書とセット</span>

<span class="c1"># ===== 辞書の基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== 辞書の基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># 辞書の作成</span>
<span class="n">person</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span>
    <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
    <span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;東京&quot;</span><span class="p">,</span>
    <span class="s2">&quot;hobbies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;読書&quot;</span><span class="p">,</span> <span class="s2">&quot;映画鑑賞&quot;</span><span class="p">,</span> <span class="s2">&quot;料理&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># 別の作成方法</span>
<span class="n">scores</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">math</span><span class="o">=</span><span class="mi">85</span><span class="p">,</span> <span class="n">english</span><span class="o">=</span><span class="mi">92</span><span class="p">,</span> <span class="n">science</span><span class="o">=</span><span class="mi">78</span><span class="p">)</span>

<span class="c1"># 空の辞書</span>
<span class="n">empty_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;人物情報: </span><span class="si">{</span><span class="n">person</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;成績: </span><span class="si">{</span><span class="n">scores</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 辞書の要素にアクセス =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 辞書の要素にアクセス ===&quot;</span><span class="p">)</span>

<span class="c1"># キーでアクセス</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;名前: </span><span class="si">{</span><span class="n">person</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;年齢: </span><span class="si">{</span><span class="n">person</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># get()メソッド（キーが存在しない場合のデフォルト値）</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;職業: </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;job&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;未設定&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;趣味: </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hobbies&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 辞書の変更 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 辞書の変更 ===&quot;</span><span class="p">)</span>

<span class="c1"># 値の変更</span>
<span class="n">person</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">26</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;年齢を更新: </span><span class="si">{</span><span class="n">person</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 新しいキーと値の追加</span>
<span class="n">person</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;tanaka@example.com&#39;</span>
<span class="n">person</span><span class="p">[</span><span class="s1">&#39;job&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;エンジニア&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;更新後: </span><span class="si">{</span><span class="n">person</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 要素の削除</span>
<span class="k">del</span> <span class="n">person</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;emailを削除後: </span><span class="si">{</span><span class="n">person</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># pop()メソッド</span>
<span class="n">removed_job</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;job&#39;</span><span class="p">,</span> <span class="s1">&#39;デフォルト値&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;削除された職業: </span><span class="si">{</span><span class="n">removed_job</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 辞書のメソッド =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 辞書のメソッド ===&quot;</span><span class="p">)</span>

<span class="c1"># すべてのキー、値、アイテム</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;キー: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">person</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;値: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">person</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;アイテム: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">person</span><span class="o">.</span><span class="n">items</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 辞書の更新</span>
<span class="n">update_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">27</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="p">:</span> <span class="s2">&quot;090-1234-5678&quot;</span><span class="p">}</span>
<span class="n">person</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">update_data</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;update後: </span><span class="si">{</span><span class="n">person</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 辞書のループ処理 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 辞書のループ処理 ===&quot;</span><span class="p">)</span>

<span class="c1"># キーでループ</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;キーでループ:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">person</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">person</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># キーと値でループ</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">キーと値でループ:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== ネストした辞書 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ネストした辞書 ===&quot;</span><span class="p">)</span>

<span class="n">company</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;テック株式会社&quot;</span><span class="p">,</span>
    <span class="s2">&quot;employees&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;001&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;田中&quot;</span><span class="p">,</span> <span class="s2">&quot;department&quot;</span><span class="p">:</span> <span class="s2">&quot;開発&quot;</span><span class="p">},</span>
        <span class="s2">&quot;002&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;山田&quot;</span><span class="p">,</span> <span class="s2">&quot;department&quot;</span><span class="p">:</span> <span class="s2">&quot;営業&quot;</span><span class="p">},</span>
        <span class="s2">&quot;003&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;佐藤&quot;</span><span class="p">,</span> <span class="s2">&quot;department&quot;</span><span class="p">:</span> <span class="s2">&quot;人事&quot;</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;locations&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;東京&quot;</span><span class="p">,</span> <span class="s2">&quot;大阪&quot;</span><span class="p">,</span> <span class="s2">&quot;名古屋&quot;</span><span class="p">]</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;会社名: </span><span class="si">{</span><span class="n">company</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;従業員002: </span><span class="si">{</span><span class="n">company</span><span class="p">[</span><span class="s1">&#39;employees&#39;</span><span class="p">][</span><span class="s1">&#39;002&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;拠点: </span><span class="si">{</span><span class="n">company</span><span class="p">[</span><span class="s1">&#39;locations&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== セットの基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== セットの基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># セットの作成</span>
<span class="n">fruits</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;りんご&quot;</span><span class="p">,</span> <span class="s2">&quot;バナナ&quot;</span><span class="p">,</span> <span class="s2">&quot;オレンジ&quot;</span><span class="p">}</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>  <span class="c1"># 重複は自動的に削除される</span>
<span class="n">empty_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>  <span class="c1"># 空のセット</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;フルーツ: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;数値（重複削除）: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== セットの操作 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== セットの操作 ===&quot;</span><span class="p">)</span>

<span class="c1"># 要素の追加</span>
<span class="n">fruits</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;ぶどう&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add後: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 要素の削除</span>
<span class="n">fruits</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;バナナ&quot;</span><span class="p">)</span>  <span class="c1"># 要素がない場合はエラー</span>
<span class="n">fruits</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="s2">&quot;メロン&quot;</span><span class="p">)</span>  <span class="c1"># 要素がなくてもエラーにならない</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;削除後: </span><span class="si">{</span><span class="n">fruits</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== セットの集合演算 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== セットの集合演算 ===&quot;</span><span class="p">)</span>

<span class="n">set_a</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">set_b</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;セットA: </span><span class="si">{</span><span class="n">set_a</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;セットB: </span><span class="si">{</span><span class="n">set_b</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 和集合</span>
<span class="n">union</span> <span class="o">=</span> <span class="n">set_a</span> <span class="o">|</span> <span class="n">set_b</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;和集合 (A ∪ B): </span><span class="si">{</span><span class="n">union</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 積集合</span>
<span class="n">intersection</span> <span class="o">=</span> <span class="n">set_a</span> <span class="o">&amp;</span> <span class="n">set_b</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;積集合 (A ∩ B): </span><span class="si">{</span><span class="n">intersection</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 差集合</span>
<span class="n">difference</span> <span class="o">=</span> <span class="n">set_a</span> <span class="o">-</span> <span class="n">set_b</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;差集合 (A - B): </span><span class="si">{</span><span class="n">difference</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 対称差集合</span>
<span class="n">symmetric_diff</span> <span class="o">=</span> <span class="n">set_a</span> <span class="o">^</span> <span class="n">set_b</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;対称差集合 (A △ B): </span><span class="si">{</span><span class="n">symmetric_diff</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 実用的な例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な例 ===&quot;</span><span class="p">)</span>

<span class="c1"># 1. 在庫管理システム</span>
<span class="n">inventory</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;りんご&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;stock&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">},</span>
    <span class="s2">&quot;バナナ&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s2">&quot;stock&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
    <span class="s2">&quot;オレンジ&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;price&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span> <span class="s2">&quot;stock&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">}</span>
<span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;在庫一覧:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">item</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">inventory</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">total_value</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">info</span><span class="p">[</span><span class="s2">&quot;stock&quot;</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">: 単価</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">円, 在庫</span><span class="si">{</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;stock&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">個, 総額</span><span class="si">{</span><span class="n">total_value</span><span class="si">}</span><span class="s2">円&quot;</span><span class="p">)</span>

<span class="c1"># 2. ユーザー管理</span>
<span class="n">users</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;user001&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;tanaka@example.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;roles&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;user002&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;山田花子&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;yamada@example.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;roles&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;user&quot;</span><span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># 管理者権限を持つユーザーを検索</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">管理者ユーザー:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">user_info</span> <span class="ow">in</span> <span class="n">users</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="s2">&quot;admin&quot;</span> <span class="ow">in</span> <span class="n">user_info</span><span class="p">[</span><span class="s2">&quot;roles&quot;</span><span class="p">]:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">user_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 3. 単語の出現回数をカウント</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;python is easy python is powerful python is versatile&quot;</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="n">word_count</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="n">word_count</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">word_count</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">単語の出現回数: </span><span class="si">{</span><span class="n">word_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 4. 重複データの検出</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;grape&quot;</span><span class="p">]</span>
<span class="n">unique_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="n">duplicates</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">duplicates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">元のデータ: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;重複を除いたデータ: </span><span class="si">{</span><span class="n">unique_data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;重複していた要素: </span><span class="si">{</span><span class="n">duplicates</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 辞書内包表記 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 辞書内包表記 ===&quot;</span><span class="p">)</span>

<span class="c1"># 基本的な辞書内包表記</span>
<span class="n">squares</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;数値と二乗: </span><span class="si">{</span><span class="n">squares</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 条件付き辞書内包表記</span>
<span class="n">even_squares</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;偶数の二乗: </span><span class="si">{</span><span class="n">even_squares</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># リストから辞書を作成</span>
<span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;田中&quot;</span><span class="p">,</span> <span class="s2">&quot;山田&quot;</span><span class="p">,</span> <span class="s2">&quot;佐藤&quot;</span><span class="p">]</span>
<span class="n">ages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">28</span><span class="p">]</span>
<span class="n">name_age_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">age</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">ages</span><span class="p">)}</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;名前と年齢: </span><span class="si">{</span><span class="n">name_age_dict</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_15"><a class="toclink" href="#_15">学習ポイント</a></h3>
<ul>
<li>辞書はキーと値のペアで構成される可変のデータ構造</li>
<li>セットは重複を許さない要素の集合</li>
<li>辞書は<code>{}</code>または<code>dict()</code>、セットは<code>{}</code>または<code>set()</code>で作成</li>
<li>辞書の要素には<code>[]</code>または<code>get()</code>メソッドでアクセス</li>
<li>セットは集合演算（和、積、差など）が可能</li>
</ul>
<hr />
<h2 id="制御フロー"><a class="toclink" href="#制御フロー">6. 制御フロー</a></h2>
<h3 id="_16"><a class="toclink" href="#_16">条件分岐とループ</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 06_control_flow.py - 制御フロー（条件分岐とループ）</span>

<span class="c1"># ===== if文 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== if文 ===&quot;</span><span class="p">)</span>

<span class="c1"># 基本的なif文</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">20</span>
<span class="k">if</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;成人です&quot;</span><span class="p">)</span>

<span class="c1"># if-else文</span>
<span class="n">score</span> <span class="o">=</span> <span class="mi">75</span>
<span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">80</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;合格です&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;不合格です&quot;</span><span class="p">)</span>

<span class="c1"># if-elif-else文</span>
<span class="n">temperature</span> <span class="o">=</span> <span class="mi">28</span>
<span class="k">if</span> <span class="n">temperature</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;とても寒い&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">temperature</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;寒い&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">temperature</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;涼しい&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">temperature</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;快適&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;暑い&quot;</span><span class="p">)</span>

<span class="c1"># ===== 条件式の詳細 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 条件式の詳細 ===&quot;</span><span class="p">)</span>

<span class="c1"># 比較演算子</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x = </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, y = </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x &gt; y: </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x &lt; y: </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x &gt;= y: </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x &lt;= y: </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x == y: </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x != y: </span><span class="si">{</span><span class="n">x</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">y</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 論理演算子</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">has_license</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">if</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span> <span class="ow">and</span> <span class="n">has_license</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">運転できます&quot;</span><span class="p">)</span>

<span class="n">rain</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">umbrella</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">if</span> <span class="n">rain</span> <span class="ow">or</span> <span class="n">umbrella</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;傘の準備OK&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">rain</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;晴れています&quot;</span><span class="p">)</span>

<span class="c1"># ===== 三項演算子 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 三項演算子 ===&quot;</span><span class="p">)</span>

<span class="n">age</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;成人&quot;</span> <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span> <span class="k">else</span> <span class="s2">&quot;未成年&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;年齢</span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">歳: </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== for文 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== for文 ===&quot;</span><span class="p">)</span>

<span class="c1"># リストの要素をループ</span>
<span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;りんご&quot;</span><span class="p">,</span> <span class="s2">&quot;バナナ&quot;</span><span class="p">,</span> <span class="s2">&quot;オレンジ&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruits</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;フルーツ: </span><span class="si">{</span><span class="n">fruit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># range()を使ったループ</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">1から5まで:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># インデックスと値を同時に取得</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">インデックス付き:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fruits</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">fruit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 辞書のループ</span>
<span class="n">person</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;田中&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;東京&quot;</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">辞書のループ:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== while文 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== while文 ===&quot;</span><span class="p">)</span>

<span class="c1"># 基本的なwhile文</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;カウント: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># 条件を満たすまでループ</span>
<span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">num</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">total</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
    <span class="n">total</span> <span class="o">+=</span> <span class="n">num</span>
    <span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">1から</span><span class="si">{</span><span class="n">num</span><span class="o">-</span><span class="mi">1</span><span class="si">}</span><span class="s2">までの合計が</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2">で100を超えました&quot;</span><span class="p">)</span>

<span class="c1"># ===== break文とcontinue文 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== break文とcontinue文 ===&quot;</span><span class="p">)</span>

<span class="c1"># break文（ループを抜ける）</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;break文の例:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  5で終了&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># continue文（次の繰り返しへ）</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">continue文の例（奇数をスキップ）:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== else節付きループ =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== else節付きループ ===&quot;</span><span class="p">)</span>

<span class="c1"># for-else</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;素数判定:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">num</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">は素数ではありません&quot;</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">は素数です&quot;</span><span class="p">)</span>

<span class="c1"># while-else</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;カウント: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;正常に終了しました&quot;</span><span class="p">)</span>

<span class="c1"># ===== ネストしたループ =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ネストしたループ ===&quot;</span><span class="p">)</span>

<span class="c1"># 九九の表（一部）</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;九九の表（3x3）:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">×</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">i</span><span class="o">*</span><span class="n">j</span><span class="si">:</span><span class="s2">2d</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;  &quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>  <span class="c1"># 改行</span>

<span class="c1"># ===== リスト内包表記との組み合わせ =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== リスト内包表記との組み合わせ ===&quot;</span><span class="p">)</span>

<span class="c1"># 条件付きリスト内包表記</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">evens</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span> <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;偶数: </span><span class="si">{</span><span class="n">evens</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ネストしたリスト内包表記</span>
<span class="n">matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="n">i</span><span class="o">*</span><span class="n">j</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;行列: </span><span class="si">{</span><span class="n">matrix</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 実用的な例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な例 ===&quot;</span><span class="p">)</span>

<span class="c1"># 1. パスワード検証</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_password</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">password</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;パスワードは8文字以上必要です&quot;</span>

    <span class="n">has_upper</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">has_lower</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">has_digit</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">password</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">char</span><span class="o">.</span><span class="n">isupper</span><span class="p">():</span>
            <span class="n">has_upper</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">char</span><span class="o">.</span><span class="n">islower</span><span class="p">():</span>
            <span class="n">has_lower</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">char</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
            <span class="n">has_digit</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_upper</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;大文字を含める必要があります&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_lower</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;小文字を含める必要があります&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_digit</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;数字を含める必要があります&quot;</span>

    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;パスワードは有効です&quot;</span>

<span class="n">passwords</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Pass123!&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="s2">&quot;PASSWORD123&quot;</span><span class="p">,</span> <span class="s2">&quot;Pass&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">pwd</span> <span class="ow">in</span> <span class="n">passwords</span><span class="p">:</span>
    <span class="n">valid</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">validate_password</span><span class="p">(</span><span class="n">pwd</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">pwd</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 2. メニューシステム</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">簡単なメニューシステム:&quot;</span><span class="p">)</span>
<span class="n">menu_items</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="s2">&quot;ファイルを開く&quot;</span><span class="p">,</span>
    <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="s2">&quot;ファイルを保存&quot;</span><span class="p">,</span>
    <span class="s2">&quot;3&quot;</span><span class="p">:</span> <span class="s2">&quot;設定&quot;</span><span class="p">,</span>
    <span class="s2">&quot;4&quot;</span><span class="p">:</span> <span class="s2">&quot;終了&quot;</span>
<span class="p">}</span>

<span class="c1"># シミュレーション（実際の入力の代わり）</span>
<span class="n">user_choices</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">user_choices</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">menu_items</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;選択: </span><span class="si">{</span><span class="n">menu_items</span><span class="p">[</span><span class="n">choice</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">choice</span> <span class="o">==</span> <span class="s2">&quot;4&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;プログラムを終了します&quot;</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;無効な選択です&quot;</span><span class="p">)</span>

<span class="c1"># 3. 数当てゲーム（シンプル版）</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="n">target</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">max_attempts</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">attempts</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">数当てゲーム（1-10の数を</span><span class="si">{</span><span class="n">max_attempts</span><span class="si">}</span><span class="s2">回以内に当ててください）&quot;</span><span class="p">)</span>
<span class="c1"># シミュレーション用の推測値</span>
<span class="n">guesses</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">target</span><span class="p">]</span>

<span class="k">for</span> <span class="n">guess</span> <span class="ow">in</span> <span class="n">guesses</span><span class="p">:</span>
    <span class="n">attempts</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;推測</span><span class="si">{</span><span class="n">attempts</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">guess</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">guess</span> <span class="o">==</span> <span class="n">target</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;正解！ </span><span class="si">{</span><span class="n">attempts</span><span class="si">}</span><span class="s2">回目で当たりました&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">elif</span> <span class="n">guess</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;もっと大きい数です&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;もっと小さい数です&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">attempts</span> <span class="o">&gt;=</span> <span class="n">max_attempts</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;残念！正解は</span><span class="si">{</span><span class="n">target</span><span class="si">}</span><span class="s2">でした&quot;</span><span class="p">)</span>
        <span class="k">break</span>
</code></pre></div>

<h3 id="_17"><a class="toclink" href="#_17">学習ポイント</a></h3>
<ul>
<li><code>if-elif-else</code>で条件分岐を実装</li>
<li><code>for</code>文でシーケンスの要素を反復処理</li>
<li><code>while</code>文で条件が真の間ループを継続</li>
<li><code>break</code>でループを抜け、<code>continue</code>で次の反復へ</li>
<li>ループにも<code>else</code>節を付けられる（正常終了時に実行）</li>
</ul>
<hr />
<h2 id="関数"><a class="toclink" href="#関数">7. 関数</a></h2>
<h3 id="_18"><a class="toclink" href="#_18">関数の定義と使用</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 07_functions.py - 関数</span>

<span class="c1"># ===== 関数の基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== 関数の基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># シンプルな関数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">greet</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;こんにちは！&quot;</span><span class="p">)</span>

<span class="c1"># 関数の呼び出し</span>
<span class="n">greet</span><span class="p">()</span>

<span class="c1"># 引数を持つ関数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">greet_with_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;こんにちは、</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">さん！&quot;</span><span class="p">)</span>

<span class="n">greet_with_name</span><span class="p">(</span><span class="s2">&quot;田中&quot;</span><span class="p">)</span>
<span class="n">greet_with_name</span><span class="p">(</span><span class="s2">&quot;山田&quot;</span><span class="p">)</span>

<span class="c1"># 戻り値を持つ関数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;5 + 3 = </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 引数の種類 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 引数の種類 ===&quot;</span><span class="p">)</span>

<span class="c1"># デフォルト引数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">introduce</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s2">&quot;東京&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">さん（</span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">歳）は</span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">に住んでいます。&quot;</span><span class="p">)</span>

<span class="n">introduce</span><span class="p">(</span><span class="s2">&quot;田中&quot;</span><span class="p">)</span>  <span class="c1"># デフォルト値を使用</span>
<span class="n">introduce</span><span class="p">(</span><span class="s2">&quot;山田&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>  <span class="c1"># ageを指定</span>
<span class="n">introduce</span><span class="p">(</span><span class="s2">&quot;佐藤&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;大阪&quot;</span><span class="p">)</span>  <span class="c1"># すべて指定</span>

<span class="c1"># キーワード引数</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">キーワード引数:&quot;</span><span class="p">)</span>
<span class="n">introduce</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;鈴木&quot;</span><span class="p">,</span> <span class="n">city</span><span class="o">=</span><span class="s2">&quot;名古屋&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>  <span class="c1"># 順序を変えて指定</span>

<span class="c1"># 可変長引数（*args）</span>
<span class="k">def</span><span class="w"> </span><span class="nf">sum_all</span><span class="p">(</span><span class="o">*</span><span class="n">numbers</span><span class="p">):</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">:</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">num</span>
    <span class="k">return</span> <span class="n">total</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">合計: </span><span class="si">{</span><span class="n">sum_all</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;合計: </span><span class="si">{</span><span class="n">sum_all</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># キーワード可変長引数（**kwargs）</span>
<span class="k">def</span><span class="w"> </span><span class="nf">print_info</span><span class="p">(</span><span class="o">**</span><span class="n">info</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">情報:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">print_info</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;高橋&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span> <span class="n">job</span><span class="o">=</span><span class="s2">&quot;エンジニア&quot;</span><span class="p">,</span> <span class="n">hobby</span><span class="o">=</span><span class="s2">&quot;読書&quot;</span><span class="p">)</span>

<span class="c1"># ===== 関数の高度な使い方 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 関数の高度な使い方 ===&quot;</span><span class="p">)</span>

<span class="c1"># 複数の戻り値</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_min_max</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">numbers</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>

<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">minimum</span><span class="p">,</span> <span class="n">maximum</span> <span class="o">=</span> <span class="n">get_min_max</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;リスト </span><span class="si">{</span><span class="n">nums</span><span class="si">}</span><span class="s2"> の最小値: </span><span class="si">{</span><span class="n">minimum</span><span class="si">}</span><span class="s2">, 最大値: </span><span class="si">{</span><span class="n">maximum</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 関数内関数（ネストした関数）</span>
<span class="k">def</span><span class="w"> </span><span class="nf">outer_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">inner_function</span><span class="p">(</span><span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="k">return</span> <span class="n">inner_function</span>

<span class="n">add_five</span> <span class="o">=</span> <span class="n">outer_function</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">5を加える関数: </span><span class="si">{</span><span class="n">add_five</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2"> = 5 + 3&quot;</span><span class="p">)</span>

<span class="c1"># ===== ラムダ関数 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ラムダ関数 ===&quot;</span><span class="p">)</span>

<span class="c1"># 基本的なラムダ関数</span>
<span class="n">square</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;3の二乗: </span><span class="si">{</span><span class="n">square</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># リストのソートで使用</span>
<span class="n">students</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;田中&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="mi">85</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;山田&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="mi">92</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;佐藤&quot;</span><span class="p">,</span> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="mi">78</span><span class="p">}</span>
<span class="p">]</span>

<span class="c1"># scoreでソート</span>
<span class="n">students</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">成績順:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">student</span><span class="p">[</span><span class="s1">&#39;score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">点&quot;</span><span class="p">)</span>

<span class="c1"># map()関数との組み合わせ</span>
<span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">squared</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">numbers</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">元のリスト: </span><span class="si">{</span><span class="n">numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;二乗: </span><span class="si">{</span><span class="n">squared</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># filter()関数との組み合わせ</span>
<span class="n">even_numbers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">numbers</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;偶数のみ: </span><span class="si">{</span><span class="n">even_numbers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== デコレータ =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== デコレータ ===&quot;</span><span class="p">)</span>

<span class="c1"># シンプルなデコレータ</span>
<span class="k">def</span><span class="w"> </span><span class="nf">uppercase_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@uppercase_decorator</span>
<span class="k">def</span><span class="w"> </span><span class="nf">say_hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">!&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">say_hello</span><span class="p">(</span><span class="s2">&quot;python&quot;</span><span class="p">))</span>  <span class="c1"># HELLO, PYTHON!</span>

<span class="c1"># 実行時間を計測するデコレータ</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>

<span class="k">def</span><span class="w"> </span><span class="nf">timer_decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">の実行時間: </span><span class="si">{</span><span class="n">end</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">start</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">秒&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@timer_decorator</span>
<span class="k">def</span><span class="w"> </span><span class="nf">slow_function</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;完了&quot;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">slow_function</span><span class="p">()</span>

<span class="c1"># ===== ジェネレータ =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ジェネレータ ===&quot;</span><span class="p">)</span>

<span class="c1"># シンプルなジェネレータ</span>
<span class="k">def</span><span class="w"> </span><span class="nf">count_up_to</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1から5まで:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">count_up_to</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># フィボナッチ数列のジェネレータ</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">a</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">フィボナッチ数列（最初の10個）:&quot;</span><span class="p">)</span>
<span class="n">fib_nums</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fib_nums</span><span class="p">)</span>

<span class="c1"># ===== 実用的な関数の例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な関数の例 ===&quot;</span><span class="p">)</span>

<span class="c1"># 1. バリデーション関数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;簡易的なメールアドレスのバリデーション&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;@&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">email</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;＠マークがありません&quot;</span>

    <span class="n">parts</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;＠マークが複数あります&quot;</span>

    <span class="n">username</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">parts</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;ユーザー名が空です&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">domain</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;ドメインが不正です&quot;</span>

    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;有効なメールアドレスです&quot;</span>

<span class="n">emails</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;invalid.email&quot;</span><span class="p">,</span> <span class="s2">&quot;@example.com&quot;</span><span class="p">,</span> <span class="s2">&quot;user@@example.com&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;メールアドレスのバリデーション:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">email</span> <span class="ow">in</span> <span class="n">emails</span><span class="p">:</span>
    <span class="n">is_valid</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">validate_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 2. 再帰関数（階乗）</span>
<span class="k">def</span><span class="w"> </span><span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;n!を計算する&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">5! = </span><span class="si">{</span><span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 3. 高階関数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">apply_operation</span><span class="p">(</span><span class="n">numbers</span><span class="p">,</span> <span class="n">operation</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;リストの各要素に操作を適用&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">operation</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">]</span>

<span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">元のリスト: </span><span class="si">{</span><span class="n">nums</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;二乗: </span><span class="si">{</span><span class="n">apply_operation</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span><span class="w"> </span><span class="k">lambda</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;2倍: </span><span class="si">{</span><span class="n">apply_operation</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span><span class="w"> </span><span class="k">lambda</span><span class="w"> </span><span class="n">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;文字列化: </span><span class="si">{</span><span class="n">apply_operation</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span><span class="w"> </span><span class="nb">str</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 4. メモ化（キャッシュ）を使った効率化</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">lru_cache</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fibonacci_memo</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;メモ化されたフィボナッチ数&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">fibonacci_memo</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fibonacci_memo</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">フィボナッチ数（メモ化）:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  F(</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">) = </span><span class="si">{</span><span class="n">fibonacci_memo</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 5. エラーハンドリングを含む関数</span>
<span class="k">def</span><span class="w"> </span><span class="nf">safe_divide</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;安全な除算&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">result</span>
    <span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;ゼロで除算はできません&quot;</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;数値以外は計算できません&quot;</span>

<span class="n">test_cases</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">)]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">安全な除算:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">test_cases</span><span class="p">:</span>
    <span class="n">success</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">safe_divide</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> ÷ </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2"> = </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2"> ÷ </span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2">: エラー - </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_19"><a class="toclink" href="#_19">学習ポイント</a></h3>
<ul>
<li><code>def</code>キーワードで関数を定義</li>
<li>引数はデフォルト値、可変長引数、キーワード引数など様々な形式</li>
<li><code>return</code>で値を返す（複数の値も可能）</li>
<li>ラムダ関数で簡潔な関数を定義</li>
<li>デコレータで関数を拡張</li>
<li>ジェネレータでメモリ効率的な反復処理</li>
</ul>
<hr />
<h2 id="モジュールとパッケージ"><a class="toclink" href="#モジュールとパッケージ">8. モジュールとパッケージ</a></h2>
<h3 id="_20"><a class="toclink" href="#_20">モジュールのインポートと作成</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 08_modules.py - モジュールとパッケージ</span>

<span class="c1"># ===== 標準ライブラリのインポート =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== 標準ライブラリのインポート ===&quot;</span><span class="p">)</span>

<span class="c1"># import文の基本</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;円周率: </span><span class="si">{</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;平方根: </span><span class="si">{</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># from ... import文</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">現在時刻: </span><span class="si">{</span><span class="n">now</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;今日の日付: </span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;1週間後: </span><span class="si">{</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># エイリアス（別名）を使ったインポート</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">rnd</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ランダムな数（1-10）: </span><span class="si">{</span><span class="n">rnd</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== よく使う標準モジュール =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== よく使う標準モジュール ===&quot;</span><span class="p">)</span>

<span class="c1"># os モジュール</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;現在のディレクトリ: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;環境変数PATH: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PATH&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Not found&#39;</span><span class="p">)[:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

<span class="c1"># sys モジュール</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Pythonバージョン: </span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;プラットフォーム: </span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># json モジュール</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;田中&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s2">&quot;hobbies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;読書&quot;</span><span class="p">,</span> <span class="s2">&quot;映画&quot;</span><span class="p">]}</span>
<span class="n">json_string</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">JSON形式:</span><span class="se">\n</span><span class="si">{</span><span class="n">json_string</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># re モジュール（正規表現）</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;私のメールアドレスは user@example.com です。&quot;</span>
<span class="n">email_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b&#39;</span>
<span class="n">email</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">email_pattern</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
<span class="k">if</span> <span class="n">email</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">見つかったメールアドレス: </span><span class="si">{</span><span class="n">email</span><span class="o">.</span><span class="n">group</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># collections モジュール</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span><span class="p">,</span> <span class="n">defaultdict</span>
<span class="n">words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">,</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span> <span class="s2">&quot;banana&quot;</span><span class="p">,</span> <span class="s2">&quot;apple&quot;</span><span class="p">]</span>
<span class="n">word_count</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">単語の出現回数: </span><span class="si">{</span><span class="nb">dict</span><span class="p">(</span><span class="n">word_count</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 自作モジュール =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 自作モジュールの例 ===&quot;</span><span class="p">)</span>

<span class="c1"># my_math.py という名前で以下の内容を保存すると仮定</span>
<span class="n">my_math_content</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">&quot;&quot;&quot;数学関連のユーティリティ関数&quot;&quot;&quot;</span>

<span class="s1">def add(a, b):</span>
<span class="s1">    &quot;&quot;&quot;2つの数を加算&quot;&quot;&quot;</span>
<span class="s1">    return a + b</span>

<span class="s1">def multiply(a, b):</span>
<span class="s1">    &quot;&quot;&quot;2つの数を乗算&quot;&quot;&quot;</span>
<span class="s1">    return a * b</span>

<span class="s1">def factorial(n):</span>
<span class="s1">    &quot;&quot;&quot;階乗を計算&quot;&quot;&quot;</span>
<span class="s1">    if n &lt;= 1:</span>
<span class="s1">        return 1</span>
<span class="s1">    return n * factorial(n - 1)</span>

<span class="s1">PI = 3.14159</span>
<span class="s1">E = 2.71828</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="c1"># 実際の使用例（ファイルがあると仮定）</span>
<span class="c1"># from my_math import add, multiply, PI</span>
<span class="c1"># result = add(5, 3)</span>
<span class="c1"># print(f&quot;5 + 3 = {result}&quot;)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;自作モジュールの構造例:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_math_content</span><span class="p">)</span>

<span class="c1"># ===== パッケージの構造 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== パッケージの構造例 ===&quot;</span><span class="p">)</span>

<span class="n">package_structure</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">my_package/</span>
<span class="s2">    __init__.py</span>
<span class="s2">    math_utils.py</span>
<span class="s2">    string_utils.py</span>
<span class="s2">    data/</span>
<span class="s2">        __init__.py</span>
<span class="s2">        csv_handler.py</span>
<span class="s2">        json_handler.py</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;パッケージのディレクトリ構造:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">package_structure</span><span class="p">)</span>

<span class="c1"># ===== __name__ == &quot;__main__&quot; の使い方 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== __name__ == &#39;__main__&#39; の使い方 ===&quot;</span><span class="p">)</span>

<span class="n">script_example</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1"># calculator.py</span>

<span class="s1">def add(a, b):</span>
<span class="s1">    return a + b</span>

<span class="s1">def subtract(a, b):</span>
<span class="s1">    return a - b</span>

<span class="s1">def main():</span>
<span class="s1">    # このスクリプトが直接実行された時のみ実行される</span>
<span class="s1">    print(&quot;電卓プログラム&quot;)</span>
<span class="s1">    result = add(10, 5)</span>
<span class="s1">    print(f&quot;10 + 5 = </span><span class="si">{result}</span><span class="s1">&quot;)</span>

<span class="s1">if __name__ == &quot;__main__&quot;:</span>
<span class="s1">    main()</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;スクリプトとモジュールの両方で使える例:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">script_example</span><span class="p">)</span>

<span class="c1"># ===== モジュールの検索パス =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== モジュールの検索パス ===&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pythonがモジュールを検索するパス:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="mi">1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  ...&quot;</span><span class="p">)</span>

<span class="c1"># ===== 実用的な例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な例 ===&quot;</span><span class="p">)</span>

<span class="c1"># 1. 設定ファイルモジュール</span>
<span class="n">config_example</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1"># config.py</span>
<span class="s1">DATABASE = {</span>
<span class="s1">    &quot;host&quot;: &quot;localhost&quot;,</span>
<span class="s1">    &quot;port&quot;: 5432,</span>
<span class="s1">    &quot;name&quot;: &quot;myapp&quot;,</span>
<span class="s1">    &quot;user&quot;: &quot;admin&quot;</span>
<span class="s1">}</span>

<span class="s1">API_KEYS = {</span>
<span class="s1">    &quot;weather&quot;: &quot;your-api-key&quot;,</span>
<span class="s1">    &quot;maps&quot;: &quot;another-api-key&quot;</span>
<span class="s1">}</span>

<span class="s1">DEBUG = True</span>
<span class="s1">MAX_UPLOAD_SIZE = 10 * 1024 * 1024  # 10MB</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1. 設定ファイルの例:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">config_example</span><span class="p">)</span>

<span class="c1"># 2. ユーティリティモジュール</span>
<span class="n">utils_example</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1"># utils.py</span>
<span class="s1">import re</span>
<span class="s1">from datetime import datetime</span>

<span class="s1">def validate_email(email):</span>
<span class="s1">    &quot;&quot;&quot;メールアドレスのバリデーション&quot;&quot;&quot;</span>
<span class="s1">    pattern = r&#39;^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$&#39;</span>
<span class="s1">    return re.match(pattern, email) is not None</span>

<span class="s1">def format_date(date_obj, format_string=&quot;%Y年%m月</span><span class="si">%d</span><span class="s1">日&quot;):</span>
<span class="s1">    &quot;&quot;&quot;日付のフォーマット&quot;&quot;&quot;</span>
<span class="s1">    return date_obj.strftime(format_string)</span>

<span class="s1">def generate_id():</span>
<span class="s1">    &quot;&quot;&quot;ユニークなIDを生成&quot;&quot;&quot;</span>
<span class="s1">    from uuid import uuid4</span>
<span class="s1">    return str(uuid4())</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">2. ユーティリティモジュールの例:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">utils_example</span><span class="p">)</span>

<span class="c1"># 3. データ処理モジュール</span>
<span class="n">data_processor_example</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1"># data_processor.py</span>
<span class="s1">import csv</span>
<span class="s1">import json</span>

<span class="s1">class DataProcessor:</span>
<span class="s1">    @staticmethod</span>
<span class="s1">    def read_csv(filename):</span>
<span class="s1">        &quot;&quot;&quot;CSVファイルを読み込んでリストで返す&quot;&quot;&quot;</span>
<span class="s1">        with open(filename, &#39;r&#39;, encoding=&#39;utf-8&#39;) as f:</span>
<span class="s1">            reader = csv.DictReader(f)</span>
<span class="s1">            return list(reader)</span>

<span class="s1">    @staticmethod</span>
<span class="s1">    def write_json(data, filename):</span>
<span class="s1">        &quot;&quot;&quot;データをJSONファイルに保存&quot;&quot;&quot;</span>
<span class="s1">        with open(filename, &#39;w&#39;, encoding=&#39;utf-8&#39;) as f:</span>
<span class="s1">            json.dump(data, f, ensure_ascii=False, indent=2)</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">3. データ処理モジュールの例:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">data_processor_example</span><span class="p">)</span>

<span class="c1"># ===== インポートのベストプラクティス =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== インポートのベストプラクティス ===&quot;</span><span class="p">)</span>

<span class="n">best_practices</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">1. 標準ライブラリ → サードパーティ → 自作モジュールの順でインポート</span>
<span class="s2">2. アルファベット順に並べる</span>
<span class="s2">3. from ... import * は避ける（名前空間の汚染を防ぐ）</span>
<span class="s2">4. 循環インポートを避ける</span>
<span class="s2">5. 相対インポートよりも絶対インポートを推奨</span>

<span class="s2">例：</span>
<span class="s2"># 良い例</span>
<span class="s2">import os</span>
<span class="s2">import sys</span>
<span class="s2">from datetime import datetime</span>

<span class="s2">import numpy as np</span>
<span class="s2">import pandas as pd</span>

<span class="s2">from myapp.utils import helper</span>
<span class="s2">from myapp.models import User</span>

<span class="s2"># 避けるべき例</span>
<span class="s2">from module import *  # 何がインポートされるか不明確</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">best_practices</span><span class="p">)</span>
</code></pre></div>

<h3 id="_21"><a class="toclink" href="#_21">学習ポイント</a></h3>
<ul>
<li><code>import</code>文でモジュールをインポート</li>
<li><code>from ... import</code>で特定の要素のみインポート</li>
<li><code>as</code>でエイリアス（別名）を設定</li>
<li>標準ライブラリには便利なモジュールが多数存在</li>
<li>自作モジュールで機能を整理・再利用</li>
</ul>
<hr />
<h2 id="クラスとオブジェクト指向"><a class="toclink" href="#クラスとオブジェクト指向">9. クラスとオブジェクト指向</a></h2>
<h3 id="_22"><a class="toclink" href="#_22">オブジェクト指向プログラミング</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 09_classes_and_oop.py - クラスとオブジェクト指向プログラミング</span>

<span class="c1"># ===== クラスの基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== クラスの基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># シンプルなクラス</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Dog</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;犬を表すクラス&quot;&quot;&quot;</span>

    <span class="c1"># クラス変数（すべてのインスタンスで共有）</span>
    <span class="n">species</span> <span class="o">=</span> <span class="s2">&quot;犬&quot;</span>

    <span class="c1"># コンストラクタ（初期化メソッド）</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="c1"># インスタンス変数</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="c1"># インスタンスメソッド</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">bark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">が吠えています: ワンワン！&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">は</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="si">}</span><span class="s2">歳の</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">species</span><span class="si">}</span><span class="s2">です。&quot;</span>

<span class="c1"># インスタンスの作成</span>
<span class="n">dog1</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s2">&quot;ポチ&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">dog2</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">(</span><span class="s2">&quot;ハチ&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dog1</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dog2</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">dog1</span><span class="o">.</span><span class="n">bark</span><span class="p">())</span>

<span class="c1"># ===== アクセス修飾子 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== アクセス修飾子 ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">salary</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>          <span class="c1"># パブリック</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_age</span> <span class="o">=</span> <span class="n">age</span>           <span class="c1"># プロテクテッド（慣習的）</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__salary</span> <span class="o">=</span> <span class="n">salary</span>    <span class="c1"># プライベート（名前マングリング）</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_salary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;プライベート変数へのアクセサー&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__salary</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_salary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_salary</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;プライベート変数へのセッター&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">new_salary</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__salary</span> <span class="o">=</span> <span class="n">new_salary</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;給与は正の数である必要があります&quot;</span><span class="p">)</span>

<span class="n">person</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="s2">&quot;田中&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">500000</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;名前: </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># OK</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;年齢: </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">_age</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># 動作するが推奨されない</span>
<span class="c1"># print(person.__salary)  # AttributeError</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;給与: </span><span class="si">{</span><span class="n">person</span><span class="o">.</span><span class="n">get_salary</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 継承 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 継承 ===&quot;</span><span class="p">)</span>

<span class="c1"># 基底クラス（親クラス）</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Animal</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">species</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="n">species</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">make_sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>  <span class="c1"># サブクラスで実装</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">は</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">species</span><span class="si">}</span><span class="s2">です。&quot;</span>

<span class="c1"># 派生クラス（子クラス）</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;猫&quot;</span><span class="p">)</span>  <span class="c1"># 親クラスのコンストラクタを呼び出し</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">make_sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;ニャー&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">purr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">がゴロゴロ言っています&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Bird</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">can_fly</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;鳥&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">can_fly</span> <span class="o">=</span> <span class="n">can_fly</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">make_sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;チュンチュン&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">can_fly</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">が飛んでいます&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">は飛べません&quot;</span>

<span class="c1"># 使用例</span>
<span class="n">cat</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">(</span><span class="s2">&quot;タマ&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">bird</span> <span class="o">=</span> <span class="n">Bird</span><span class="p">(</span><span class="s2">&quot;ピーちゃん&quot;</span><span class="p">)</span>
<span class="n">penguin</span> <span class="o">=</span> <span class="n">Bird</span><span class="p">(</span><span class="s2">&quot;ペンペン&quot;</span><span class="p">,</span> <span class="n">can_fly</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cat</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">cat</span><span class="o">.</span><span class="n">make_sound</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cat</span><span class="o">.</span><span class="n">purr</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">bird</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">bird</span><span class="o">.</span><span class="n">make_sound</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bird</span><span class="o">.</span><span class="n">fly</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">penguin</span><span class="o">.</span><span class="n">fly</span><span class="p">())</span>

<span class="c1"># ===== 多重継承 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 多重継承 ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Flyable</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;飛んでいます&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Swimmable</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">swim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;泳いでいます&quot;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Duck</span><span class="p">(</span><span class="n">Animal</span><span class="p">,</span> <span class="n">Flyable</span><span class="p">,</span> <span class="n">Swimmable</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;アヒル&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">make_sound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;ガーガー&quot;</span>

<span class="n">duck</span> <span class="o">=</span> <span class="n">Duck</span><span class="p">(</span><span class="s2">&quot;ドナルド&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">duck</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">duck</span><span class="o">.</span><span class="n">fly</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">duck</span><span class="o">.</span><span class="n">swim</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="n">duck</span><span class="o">.</span><span class="n">make_sound</span><span class="p">())</span>

<span class="c1"># ===== ポリモーフィズム =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ポリモーフィズム ===&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">animal_concert</span><span class="p">(</span><span class="n">animals</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;異なる動物の鳴き声を出力&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">animal</span> <span class="ow">in</span> <span class="n">animals</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">animal</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">animal</span><span class="o">.</span><span class="n">make_sound</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 異なるクラスのインスタンスを同じように扱う</span>
<span class="n">animals</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Cat</span><span class="p">(</span><span class="s2">&quot;ミケ&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">Bird</span><span class="p">(</span><span class="s2">&quot;インコ&quot;</span><span class="p">),</span>
    <span class="n">Duck</span><span class="p">(</span><span class="s2">&quot;カモ子&quot;</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">animal_concert</span><span class="p">(</span><span class="n">animals</span><span class="p">)</span>

<span class="c1"># ===== 特殊メソッド（マジックメソッド） =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 特殊メソッド ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Book</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">author</span><span class="p">,</span> <span class="n">pages</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">author</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">=</span> <span class="n">pages</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;文字列表現&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39; by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;開発者向けの文字列表現&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Book(&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&#39;, &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="si">}</span><span class="s2">&#39;, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pages</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;len()関数で使用&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;等価比較&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Book</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">title</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">author</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;小なり比較（ページ数で比較）&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pages</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">pages</span>

<span class="n">book1</span> <span class="o">=</span> <span class="n">Book</span><span class="p">(</span><span class="s2">&quot;Python入門&quot;</span><span class="p">,</span> <span class="s2">&quot;山田太郎&quot;</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="n">book2</span> <span class="o">=</span> <span class="n">Book</span><span class="p">(</span><span class="s2">&quot;Python実践&quot;</span><span class="p">,</span> <span class="s2">&quot;田中花子&quot;</span><span class="p">,</span> <span class="mi">450</span><span class="p">)</span>
<span class="n">book3</span> <span class="o">=</span> <span class="n">Book</span><span class="p">(</span><span class="s2">&quot;Python入門&quot;</span><span class="p">,</span> <span class="s2">&quot;山田太郎&quot;</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">book1</span><span class="p">))</span>  <span class="c1"># __str__</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">book2</span><span class="p">))</span>  <span class="c1"># __repr__</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ページ数: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">book1</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># __len__</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;book1 == book3: </span><span class="si">{</span><span class="n">book1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">book3</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># __eq__</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;book1 &lt; book2: </span><span class="si">{</span><span class="n">book1</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">book2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># __lt__</span>

<span class="c1"># ===== プロパティ =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== プロパティ ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Temperature</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">celsius</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_celsius</span> <span class="o">=</span> <span class="n">celsius</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">celsius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;摂氏温度のゲッター&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_celsius</span>

    <span class="nd">@celsius</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">celsius</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;摂氏温度のセッター&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">273.15</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;絶対零度以下にはできません&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_celsius</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fahrenheit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;華氏温度（読み取り専用）&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_celsius</span> <span class="o">*</span> <span class="mi">9</span><span class="o">/</span><span class="mi">5</span> <span class="o">+</span> <span class="mi">32</span>

<span class="n">temp</span> <span class="o">=</span> <span class="n">Temperature</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;摂氏: </span><span class="si">{</span><span class="n">temp</span><span class="o">.</span><span class="n">celsius</span><span class="si">}</span><span class="s2">°C&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;華氏: </span><span class="si">{</span><span class="n">temp</span><span class="o">.</span><span class="n">fahrenheit</span><span class="si">}</span><span class="s2">°F&quot;</span><span class="p">)</span>

<span class="n">temp</span><span class="o">.</span><span class="n">celsius</span> <span class="o">=</span> <span class="mi">30</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;更新後 - 摂氏: </span><span class="si">{</span><span class="n">temp</span><span class="o">.</span><span class="n">celsius</span><span class="si">}</span><span class="s2">°C, 華氏: </span><span class="si">{</span><span class="n">temp</span><span class="o">.</span><span class="n">fahrenheit</span><span class="si">}</span><span class="s2">°F&quot;</span><span class="p">)</span>

<span class="c1"># ===== クラスメソッドと静的メソッド =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== クラスメソッドと静的メソッド ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DateUtils</span><span class="p">:</span>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_leap_year</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;うるう年判定（静的メソッド）&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">year</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">year</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">year</span> <span class="o">%</span> <span class="mi">400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">days_in_month</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;月の日数を返す（クラスメソッド）&quot;&quot;&quot;</span>
        <span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="mi">31</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">month</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="bp">cls</span><span class="o">.</span><span class="n">is_leap_year</span><span class="p">(</span><span class="n">year</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">29</span>
        <span class="k">return</span> <span class="n">days</span><span class="p">[</span><span class="n">month</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;2024年はうるう年: </span><span class="si">{</span><span class="n">DateUtils</span><span class="o">.</span><span class="n">is_leap_year</span><span class="p">(</span><span class="mi">2024</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;2024年2月の日数: </span><span class="si">{</span><span class="n">DateUtils</span><span class="o">.</span><span class="n">days_in_month</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">日&quot;</span><span class="p">)</span>

<span class="c1"># ===== 実用的なクラスの例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的なクラスの例 ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">BankAccount</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;銀行口座クラス&quot;&quot;&quot;</span>

    <span class="c1"># クラス変数</span>
    <span class="n">bank_name</span> <span class="o">=</span> <span class="s2">&quot;Python銀行&quot;</span>
    <span class="n">account_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">initial_balance</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span> <span class="o">=</span> <span class="n">initial_balance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transaction_history</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">BankAccount</span><span class="o">.</span><span class="n">account_count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">account_number</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;ACC</span><span class="si">{</span><span class="n">BankAccount</span><span class="o">.</span><span class="n">account_count</span><span class="si">:</span><span class="s2">04d</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">balance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">deposit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;入金&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">amount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span> <span class="o">+=</span> <span class="n">amount</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transaction_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;入金: ¥</span><span class="si">{</span><span class="n">amount</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;出金&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">amount</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__balance</span> <span class="o">-=</span> <span class="n">amount</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">transaction_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;出金: ¥</span><span class="si">{</span><span class="n">amount</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_statement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;取引明細&quot;&quot;&quot;</span>
        <span class="n">statement</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">bank_name</span><span class="si">}</span><span class="s2"> - 口座番号: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">account_number</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">statement</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;口座名義: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">statement</span> <span class="o">+=</span> <span class="s2">&quot;取引履歴:</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">transaction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transaction_history</span><span class="p">:</span>
            <span class="n">statement</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">transaction</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">statement</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;現在の残高: ¥</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__balance</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">statement</span>

<span class="c1"># 使用例</span>
<span class="n">account1</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>
<span class="n">account2</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="p">(</span><span class="s2">&quot;山田花子&quot;</span><span class="p">,</span> <span class="mi">5000</span><span class="p">)</span>

<span class="n">account1</span><span class="o">.</span><span class="n">deposit</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
<span class="n">account1</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="mi">3000</span><span class="p">)</span>
<span class="n">account1</span><span class="o">.</span><span class="n">deposit</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">account1</span><span class="o">.</span><span class="n">get_statement</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">総口座数: </span><span class="si">{</span><span class="n">BankAccount</span><span class="o">.</span><span class="n">account_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_23"><a class="toclink" href="#_23">学習ポイント</a></h3>
<ul>
<li>クラスは<code>class</code>キーワードで定義</li>
<li><code>__init__</code>メソッドでインスタンスを初期化</li>
<li>継承により既存クラスを拡張</li>
<li>特殊メソッドでPythonの組み込み関数と連携</li>
<li><code>@property</code>デコレータでゲッター/セッターを実装</li>
</ul>
<hr />
<h2 id="ファイル操作"><a class="toclink" href="#ファイル操作">10. ファイル操作</a></h2>
<h3 id="_24"><a class="toclink" href="#_24">ファイルの読み書き</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 10_file_handling.py - ファイル操作</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">csv</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># ===== ファイルの読み書き基本 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== ファイルの読み書き基本 ===&quot;</span><span class="p">)</span>

<span class="c1"># テキストファイルへの書き込み</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Pythonでファイル操作を学んでいます。</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;これは2行目です。</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;3行目を書き込みました。&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;sample.txtを作成しました&quot;</span><span class="p">)</span>

<span class="c1"># テキストファイルの読み込み</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ファイル全体の内容:</span><span class="se">\n</span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 1行ずつ読み込む</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">1行ずつ読み込み:&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line_num</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">line_num</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== ファイルモード =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ファイルモード ===&quot;</span><span class="p">)</span>

<span class="c1"># 追記モード</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">追記された行です。&quot;</span><span class="p">)</span>

<span class="c1"># readlines()を使った読み込み</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;行数: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;最後の行: </span><span class="si">{</span><span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== バイナリファイルの操作 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== バイナリファイルの操作 ===&quot;</span><span class="p">)</span>

<span class="c1"># バイナリデータの書き込み</span>
<span class="n">data</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span><span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x79</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x68</span><span class="p">,</span> <span class="mh">0x6F</span><span class="p">,</span> <span class="mh">0x6E</span><span class="p">])</span>  <span class="c1"># &quot;Python&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;binary_data.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># バイナリデータの読み込み</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;binary_data.bin&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">binary_content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;バイナリデータ: </span><span class="si">{</span><span class="n">binary_content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;デコード結果: </span><span class="si">{</span><span class="n">binary_content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== CSVファイルの操作 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== CSVファイルの操作 ===&quot;</span><span class="p">)</span>

<span class="c1"># CSVファイルの書き込み</span>
<span class="n">students</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="s2">&quot;名前&quot;</span><span class="p">,</span> <span class="s2">&quot;年齢&quot;</span><span class="p">,</span> <span class="s2">&quot;成績&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">85</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;山田花子&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">92</span><span class="p">],</span>
    <span class="p">[</span><span class="s2">&quot;佐藤次郎&quot;</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">78</span><span class="p">]</span>
<span class="p">]</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;students.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">students</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;students.csvを作成しました&quot;</span><span class="p">)</span>

<span class="c1"># CSVファイルの読み込み</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">CSVファイルの内容:&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;students.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># DictReaderを使った読み込み</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">DictReaderを使用:&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;students.csv&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;名前&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;年齢&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">歳): </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;成績&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">点&quot;</span><span class="p">)</span>

<span class="c1"># ===== JSONファイルの操作 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== JSONファイルの操作 ===&quot;</span><span class="p">)</span>

<span class="c1"># 辞書データの準備</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;users&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;田中太郎&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;tanaka@example.com&quot;</span><span class="p">,</span>
            <span class="s2">&quot;active&quot;</span><span class="p">:</span> <span class="kc">True</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;山田花子&quot;</span><span class="p">,</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;yamada@example.com&quot;</span><span class="p">,</span>
            <span class="s2">&quot;active&quot;</span><span class="p">:</span> <span class="kc">False</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;updated_at&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
<span class="p">}</span>

<span class="c1"># JSONファイルへの書き込み</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;users.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;users.jsonを作成しました&quot;</span><span class="p">)</span>

<span class="c1"># JSONファイルの読み込み</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;users.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">loaded_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">読み込んだデータ:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ユーザー数: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">loaded_data</span><span class="p">[</span><span class="s1">&#39;users&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">loaded_data</span><span class="p">[</span><span class="s1">&#39;users&#39;</span><span class="p">]:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;アクティブ&quot;</span> <span class="k">if</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;active&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="s2">&quot;非アクティブ&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">status</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== ファイルとディレクトリの操作 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== ファイルとディレクトリの操作 ===&quot;</span><span class="p">)</span>

<span class="c1"># 現在のディレクトリ</span>
<span class="n">current_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;現在のディレクトリ: </span><span class="si">{</span><span class="n">current_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ファイルの存在確認</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;sample.txtは存在します&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  サイズ: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="s1">&#39;sample.txt&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">バイト&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  絶対パス: </span><span class="si">{</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;sample.txt&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ディレクトリの作成</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;temp_dir&quot;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s2">&quot;temp_dir&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">temp_dirを作成しました&quot;</span><span class="p">)</span>

<span class="c1"># ファイルの移動/名前変更</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;temp_dir/renamed_sample.txt&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ファイルを移動しました&quot;</span><span class="p">)</span>

<span class="c1"># ディレクトリ内のファイル一覧</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">temp_dir内のファイル:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s2">&quot;temp_dir&quot;</span><span class="p">):</span>
    <span class="n">item_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s2">&quot;temp_dir&quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">item_path</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ファイル: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  ディレクトリ: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== with文を使わない方法（推奨されない） =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== with文を使わない方法（参考） ===&quot;</span><span class="p">)</span>

<span class="c1"># 手動でファイルを開いて閉じる</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;manual_file.txt&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;手動でファイルを管理&quot;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>  <span class="c1"># 必ず閉じる</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;※ with文を使うことを推奨します&quot;</span><span class="p">)</span>

<span class="c1"># ===== 実用的な例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な例 ===&quot;</span><span class="p">)</span>

<span class="c1"># 1. ログファイルの作成</span>
<span class="k">def</span><span class="w"> </span><span class="nf">write_log</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;app.log&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;タイムスタンプ付きでログを記録&quot;&quot;&quot;</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">write_log</span><span class="p">(</span><span class="s2">&quot;アプリケーションが起動しました&quot;</span><span class="p">)</span>
<span class="n">write_log</span><span class="p">(</span><span class="s2">&quot;ユーザーがログインしました&quot;</span><span class="p">)</span>
<span class="n">write_log</span><span class="p">(</span><span class="s2">&quot;処理が完了しました&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ログファイルを作成しました&quot;</span><span class="p">)</span>

<span class="c1"># 2. 設定ファイルの読み書き</span>
<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;app_name&quot;</span><span class="p">:</span> <span class="s2">&quot;MyPythonApp&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;debug&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;max_connections&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="mi">30</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1"># 設定を保存</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># 設定を読み込んで更新</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">loaded_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">loaded_config</span><span class="p">[</span><span class="s2">&quot;settings&quot;</span><span class="p">][</span><span class="s2">&quot;debug&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">loaded_config</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">loaded_config</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">設定ファイルを更新しました&quot;</span><span class="p">)</span>

<span class="c1"># 3. データのバックアップ</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>

<span class="k">def</span><span class="w"> </span><span class="nf">backup_file</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">backup_dir</span><span class="o">=</span><span class="s2">&quot;backups&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ファイルをタイムスタンプ付きでバックアップ&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">backup_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">backup_dir</span><span class="p">)</span>

    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">_%H%M%S&quot;</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">source</span><span class="p">)</span>
    <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">backup_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}{</span><span class="n">ext</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">backup_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">backup_dir</span><span class="p">,</span> <span class="n">backup_name</span><span class="p">)</span>

    <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">backup_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">backup_path</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">):</span>
    <span class="n">backup_path</span> <span class="o">=</span> <span class="n">backup_file</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">バックアップを作成: </span><span class="si">{</span><span class="n">backup_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== クリーンアップ =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== クリーンアップ ===&quot;</span><span class="p">)</span>

<span class="c1"># 作成したファイルを削除</span>
<span class="n">files_to_remove</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;binary_data.bin&quot;</span><span class="p">,</span>
    <span class="s2">&quot;students.csv&quot;</span><span class="p">,</span>
    <span class="s2">&quot;users.json&quot;</span><span class="p">,</span>
    <span class="s2">&quot;manual_file.txt&quot;</span><span class="p">,</span>
    <span class="s2">&quot;app.log&quot;</span><span class="p">,</span>
    <span class="s2">&quot;config.json&quot;</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files_to_remove</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;削除: </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ディレクトリの削除</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;temp_dir&quot;</span><span class="p">):</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s2">&quot;temp_dir&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;削除: temp_dir/&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s2">&quot;backups&quot;</span><span class="p">):</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s2">&quot;backups&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;削除: backups/&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">クリーンアップ完了&quot;</span><span class="p">)</span>
</code></pre></div>

<h3 id="_25"><a class="toclink" href="#_25">学習ポイント</a></h3>
<ul>
<li><code>with</code>文でファイルを安全に開閉</li>
<li>テキストファイルは<code>encoding="utf-8"</code>を指定</li>
<li>CSVは<code>csv</code>モジュール、JSONは<code>json</code>モジュールを使用</li>
<li><code>os</code>モジュールでファイルシステムを操作</li>
<li>常に例外処理を考慮したファイル操作を心がける</li>
</ul>
<hr />
<h2 id="エラー処理"><a class="toclink" href="#エラー処理">11. エラー処理</a></h2>
<h3 id="_26"><a class="toclink" href="#_26">例外処理とエラーハンドリング</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># 11_error_handling.py - エラー処理と例外</span>

<span class="c1"># ===== 基本的な例外処理 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=== 基本的な例外処理 ===&quot;</span><span class="p">)</span>

<span class="c1"># try-except文</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="mi">0</span>
<span class="k">except</span> <span class="ne">ZeroDivisionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;エラー: ゼロで除算することはできません&quot;</span><span class="p">)</span>

<span class="c1"># 複数の例外を処理</span>
<span class="k">def</span><span class="w"> </span><span class="nf">safe_convert</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラー: &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39;は整数に変換できません&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラー: 型が不正です&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">変換結果: </span><span class="si">{</span><span class="n">safe_convert</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;変換結果: </span><span class="si">{</span><span class="n">safe_convert</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;変換結果: </span><span class="si">{</span><span class="n">safe_convert</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== 例外の詳細情報 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 例外の詳細情報 ===&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">numbers</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>  <span class="c1"># IndexError</span>
<span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラーの種類: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラーメッセージ: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 複数の例外を同時にキャッチ</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;数値を入力してください（デモのため&#39;abc&#39;を使用）: &quot;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span>  <span class="c1"># デモ用</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">/</span> <span class="n">num</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">ZeroDivisionError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;入力エラー: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== else節とfinally節 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== else節とfinally節 ===&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">read_file_safely</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">file</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラー: ファイル &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; が見つかりません&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラー: ファイル &#39;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&#39; への読み取り権限がありません&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># エラーが発生しなかった場合のみ実行</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ファイルの読み取りに成功しました&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">content</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># エラーの有無に関わらず必ず実行</span>
        <span class="k">if</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ファイルをクローズしました&quot;</span><span class="p">)</span>

<span class="c1"># 存在しないファイルを読み込もうとする</span>
<span class="n">read_file_safely</span><span class="p">(</span><span class="s2">&quot;non_existent_file.txt&quot;</span><span class="p">)</span>

<span class="c1"># ===== 例外の再発生 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 例外の再発生 ===&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">process_data</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># データ処理のシミュレーション</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;データが空です&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;データ処理中にエラーが発生しました&quot;</span><span class="p">)</span>
        <span class="k">raise</span>  <span class="c1"># 例外を再発生させる</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">process_data</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;上位でキャッチ: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== カスタム例外 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== カスタム例外 ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ValidationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;バリデーションエラー用のカスタム例外&quot;&quot;&quot;</span>
    <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AgeValidationError</span><span class="p">(</span><span class="n">ValidationError</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;年齢バリデーション用の例外&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;年齢が不正です&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_age</span><span class="p">(</span><span class="n">age</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;年齢は整数である必要があります&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AgeValidationError</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="s2">&quot;年齢は0以上である必要があります&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">150</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AgeValidationError</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="s2">&quot;年齢が現実的ではありません&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># カスタム例外のテスト</span>
<span class="n">test_ages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;30&quot;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">age</span> <span class="ow">in</span> <span class="n">test_ages</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">validate_age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;年齢 </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2"> は有効です&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">AgeValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;年齢エラー: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;型エラー: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== アサーション =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== アサーション ===&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_average</span><span class="p">(</span><span class="n">numbers</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;リストが空です&quot;</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">numbers</span><span class="p">),</span> <span class="s2">&quot;数値以外が含まれています&quot;</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;平均: </span><span class="si">{</span><span class="n">calculate_average</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;平均: </span><span class="si">{</span><span class="n">calculate_average</span><span class="p">([])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>  <span class="c1"># AssertionError</span>
<span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;アサーションエラー: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># ===== コンテキストマネージャーでのエラー処理 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== コンテキストマネージャー ===&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DatabaseConnection</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;データベースに接続しました&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc_type</span><span class="p">,</span> <span class="n">exc_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">exc_type</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラーが発生しました: </span><span class="si">{</span><span class="n">exc_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ロールバックを実行します&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;コミットを実行します&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;データベース接続を閉じました&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># 例外を伝播させる</span>

<span class="c1"># 正常なケース</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;正常なケース:&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">DatabaseConnection</span><span class="p">()</span> <span class="k">as</span> <span class="n">db</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;データを処理中...&quot;</span><span class="p">)</span>

<span class="c1"># エラーが発生するケース</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">エラーケース:&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">DatabaseConnection</span><span class="p">()</span> <span class="k">as</span> <span class="n">db</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;データを処理中...&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;データが不正です&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;エラーを処理しました&quot;</span><span class="p">)</span>

<span class="c1"># ===== 実用的な例 =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== 実用的な例 ===&quot;</span><span class="p">)</span>

<span class="c1"># 1. 堅牢な入力処理</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_user_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ユーザー入力を取得し、バリデーションを行う&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_attempts</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># デモ用の入力値</span>
            <span class="k">if</span> <span class="n">attempt</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;abc&quot;</span>  <span class="c1"># 最初は無効な値</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;25&quot;</span>   <span class="c1"># 2回目は有効な値</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s2"> (入力値: </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">validator</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">validator</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">remaining</span> <span class="o">=</span> <span class="n">max_attempts</span> <span class="o">-</span> <span class="n">attempt</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">remaining</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;エラー: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;残り</span><span class="si">{</span><span class="n">remaining</span><span class="si">}</span><span class="s2">回入力できます&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;最大試行回数に達しました&quot;</span><span class="p">)</span>
                <span class="k">raise</span>

<span class="c1"># 使用例</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">get_user_input</span><span class="p">(</span><span class="s2">&quot;年齢を入力してください:&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;入力された年齢: </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;有効な入力が得られませんでした&quot;</span><span class="p">)</span>

<span class="c1"># 2. リトライ機能付き関数</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

<span class="k">def</span><span class="w"> </span><span class="nf">retry</span><span class="p">(</span><span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;リトライデコレータ&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">last_exception</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">for</span> <span class="n">attempt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_attempts</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">last_exception</span> <span class="o">=</span> <span class="n">e</span>
                    <span class="k">if</span> <span class="n">attempt</span> <span class="o">&lt;</span> <span class="n">max_attempts</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;試行 </span><span class="si">{</span><span class="n">attempt</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2"> 失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delay</span><span class="si">}</span><span class="s2">秒後にリトライします...&quot;</span><span class="p">)</span>
                        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;すべての試行が失敗しました&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">last_exception</span>
        <span class="k">return</span> <span class="n">wrapper</span>
    <span class="k">return</span> <span class="n">decorator</span>

<span class="nd">@retry</span><span class="p">(</span><span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">unstable_network_call</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;不安定なネットワーク呼び出しのシミュレーション&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.7</span><span class="p">:</span>  <span class="c1"># 70%の確率で失敗</span>
        <span class="k">raise</span> <span class="ne">ConnectionError</span><span class="p">(</span><span class="s2">&quot;ネットワークエラー&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="s2">&quot;成功！&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">不安定な処理のリトライ:&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">unstable_network_call</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;結果: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;最終的に失敗しました&quot;</span><span class="p">)</span>

<span class="c1"># 3. ログ機能付きエラーハンドラ</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># ログの設定</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">log_errors</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;エラーをログに記録するデコレータ&quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">func</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">でエラー発生: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="n">wrapper</span>

<span class="nd">@log_errors</span>
<span class="k">def</span><span class="w"> </span><span class="nf">risky_operation</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;エラーが発生する可能性のある処理&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;ゼロ除算は許可されていません&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">ログ機能付きエラー処理:&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">risky_operation</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;エラーがログに記録されました&quot;</span><span class="p">)</span>

<span class="c1"># ===== エラー処理のベストプラクティス =====</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== エラー処理のベストプラクティス ===&quot;</span><span class="p">)</span>

<span class="n">best_practices</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">1. 具体的な例外をキャッチする（Exception は最後の手段）</span>
<span class="s2">2. エラーメッセージは分かりやすく具体的に</span>
<span class="s2">3. finally節でリソースのクリーンアップを行う</span>
<span class="s2">4. 適切なログを残す</span>
<span class="s2">5. ユーザーフレンドリーなエラーメッセージを表示</span>
<span class="s2">6. エラーを握りつぶさない（適切に処理または再発生）</span>
<span class="s2">7. カスタム例外は基底例外クラスから継承</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">best_practices</span><span class="p">)</span>
</code></pre></div>

<h3 id="_27"><a class="toclink" href="#_27">学習ポイント</a></h3>
<ul>
<li><code>try-except</code>で例外をキャッチして処理</li>
<li><code>else</code>節は例外が発生しなかった場合に実行</li>
<li><code>finally</code>節は必ず実行される（クリーンアップ用）</li>
<li>カスタム例外クラスで独自のエラー型を定義</li>
<li>デコレータでエラー処理を共通化</li>
</ul>
<hr />
<h2 id="_28"><a class="toclink" href="#_28">まとめ</a></h2>
<p>このチュートリアルでは、Pythonプログラミングの基礎から応用まで幅広くカバーしました。</p>
<h3 id="_29"><a class="toclink" href="#_29">学習した内容</a></h3>
<ol>
<li><strong>基本構文</strong>: 変数、データ型、演算子</li>
<li><strong>データ構造</strong>: リスト、タプル、辞書、セット</li>
<li><strong>制御構造</strong>: 条件分岐、ループ</li>
<li><strong>関数</strong>: 定義、引数、戻り値、デコレータ</li>
<li><strong>モジュール</strong>: インポート、パッケージ構造</li>
<li><strong>オブジェクト指向</strong>: クラス、継承、ポリモーフィズム</li>
<li><strong>ファイル操作</strong>: テキスト、CSV、JSON</li>
<li><strong>エラー処理</strong>: 例外処理、カスタム例外</li>
</ol>
<h3 id="_30"><a class="toclink" href="#_30">次のステップ</a></h3>
<ul>
<li>より高度なPythonライブラリ（NumPy、Pandas、Matplotlib）を学習</li>
<li>Webフレームワーク（Django、Flask）でWebアプリケーション開発</li>
<li>データサイエンスや機械学習への応用</li>
<li>実際のプロジェクトでコードを書いて経験を積む</li>
</ul>
<h3 id="_31"><a class="toclink" href="#_31">参考リソース</a></h3>
<ul>
<li><a href="https://docs.python.org/ja/3/">Python公式ドキュメント</a></li>
<li><a href="https://pypi.org/">Python Package Index (PyPI)</a></li>
<li>オンラインコミュニティやフォーラムでの質問と学習</li>
</ul>
<p>プログラミングは実践が重要です。このチュートリアルで学んだ内容を基に、自分のプロジェクトを作成してみてください。Happy Coding! 🐍</p>
    <a href="#" class="back-to-top" title="ページトップに戻る">↑</a>
    
    <script>
        // ページトップに戻る機能
        document.querySelector('.back-to-top').addEventListener('click', function(e) {
            e.preventDefault();
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // 目次リンクのスムーススクロール
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // コードブロックにコピー機能を追加
        document.querySelectorAll('pre').forEach(pre => {
            const button = document.createElement('button');
            button.textContent = 'コピー';
            button.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: #3498db;
                color: white;
                border: none;
                padding: 5px 10px;
                border-radius: 3px;
                cursor: pointer;
                font-size: 12px;
            `;
            
            pre.style.position = 'relative';
            pre.appendChild(button);
            
            button.addEventListener('click', () => {
                const code = pre.querySelector('code') || pre;
                navigator.clipboard.writeText(code.textContent).then(() => {
                    button.textContent = 'コピー完了!';
                    setTimeout(() => {
                        button.textContent = 'コピー';
                    }, 2000);
                });
            });
        });
    </script>
</body>
</html>